(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b2df00d2"],{"0b65":function(t,e,a){"use strict";e["a"]={shortcuts:[{text:"今天",onClick:function(t){var e=new Date,a=new Date;a.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),t.$emit("pick",[a,e])}},{text:"昨天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),t.$emit("pick",[a,e])}},{text:"最近7天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近30天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"本月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),t.$emit("pick",[a,e])}},{text:"本年",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.setTime(new Date((new Date).getFullYear(),0,1))),t.$emit("pick",[a,e])}}]}},"32e6":function(t,e,a){"use strict";a("ce5a")},a6b2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"divBox"},[s("div",{staticClass:"selCard"},[s("el-form",{ref:"searchForm",attrs:{model:t.tableFrom,size:"small",inline:"","label-width":"90px"}},[s("el-form-item",{attrs:{label:"时间选择："}},[s("el-date-picker",{staticStyle:{width:"280px"},attrs:{"value-format":"yyyy/MM/dd",format:"yyyy/MM/dd",size:"small",type:"daterange",clearable:"",placement:"bottom-end",placeholder:"自定义时间","picker-options":t.pickerOptions},on:{change:t.onchangeTime},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"优惠券类型：",prop:"coupon_type"}},[s("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:""},on:{change:function(e){return t.getList(1)}},model:{value:t.tableFrom.coupon_type,callback:function(e){t.$set(t.tableFrom,"coupon_type",e)},expression:"tableFrom.coupon_type"}},[s("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),s("el-option",{attrs:{label:"店铺券",value:0}}),t._v(" "),s("el-option",{attrs:{label:"商品券",value:1}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"优惠券名称：",prop:"coupon_name"}},[s("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入优惠券名称",clearable:""},on:{change:function(e){return t.getList(1)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(1)}},model:{value:t.tableFrom.coupon_name,callback:function(e){t.$set(t.tableFrom,"coupon_name",e)},expression:"tableFrom.coupon_name"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getList(1)}}},[t._v("搜索")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(e){return t.searchReset()}}},[t._v("重置")])],1)],1)],1),t._v(" "),s("el-card",{staticClass:"mt14"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.tableData.data,size:"small","highlight-current-row":""}},[s("el-table-column",{attrs:{prop:"coupon_send_id",label:"ID","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"优惠劵名称","min-width":"120"}}),t._v(" "),s("el-table-column",{attrs:{label:"优惠劵类型","min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",[t._v(t._s(t._f("couponTypeFilter")(a.type)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"create_time","min-width":"150",label:"发送日期"}}),t._v(" "),s("el-table-column",{attrs:{"min-width":"180",label:"使用有效期"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.use_start_time&&a.use_end_time?s("div",[t._v("\n            "+t._s(a.use_start_time)+" "),s("br"),t._v("- "+t._s(a.use_end_time)+"\n          ")]):s("span",[t._v(t._s(a.coupon_time)+"天")])]}}])}),t._v(" "),s("el-table-column",{attrs:{"min-width":"150",label:"筛选条件"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.mark.search?s("div",[a.mark.search["用户标签"]?s("span",[t._v("\n                用户标签:"+t._s(a.mark.search["用户标签"])+"\n            ")]):t._e(),t._v(" "),a.mark.search["用户类型"]?s("span",[t._v("\n                用户类型:"+t._s(a.mark.search["用户类型"])+"\n            ")]):t._e(),t._v(" "),a.mark.search["性别"]?s("span",[t._v("\n                性别:"+t._s(a.mark.search["性别"])+"\n            ")]):t._e(),t._v(" "),a.mark.search["消费情况"]?s("span",[t._v("\n                消费情况:"+t._s(a.mark.search["消费情况"])+"\n            ")]):t._e(),t._v(" "),a.mark.search["身份"]?s("span",[t._v("\n                身份:"+t._s(a.mark.search["身份"])+"\n            ")]):t._e(),t._v(" "),a.mark.search["访问情况"]?s("span",[t._v("\n                访问情况:"+t._s(a.mark.search["访问情况"])+"\n            ")]):t._e(),t._v(" "),a.mark.search["访问时间"]?s("span",[t._v("\n                访问时间:"+t._s(a.mark.search["访问时间"])+"\n            ")]):t._e(),t._v(" "),a.mark.search["昵称"]?s("span",[t._v("\n                昵称:"+t._s(a.mark.search["昵称"])+"\n            ")]):t._e()]):s("span",[t._v("无")])]}}])}),t._v(" "),s("el-table-column",{attrs:{"min-width":"200",label:"使用情况"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("div",[s("span",[t._v("发放数量："+t._s(a.coupon_num))]),t._v(" "),s("span",{staticClass:"sheng"},[t._v("发放使用数量："+t._s(a.useCount))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(a){return t.details(e.row)}}},[t._v("详情")]),t._v(" "),s("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(a){return t.usedRecord(e.row.coupon_send_id)}}},[t._v("使用记录")])]}}])})],1),t._v(" "),s("div",{staticClass:"block"},[s("el-pagination",{attrs:{background:"","page-size":t.tableFrom.limit,"current-page":t.tableFrom.page,layout:"total, prev, pager, next, jumper",total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)],1),t._v(" "),t.detailDialog?s("el-dialog",{attrs:{title:"优惠券详情",visible:t.detailDialog,width:"600px"},on:{"update:visible":function(e){t.detailDialog=e}}},[s("div",[s("div",{staticClass:"box-container"},[s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("优惠券名称：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.title))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("优惠券类型：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t._f("couponTypeFilter")(t.couponDetail.type)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("优惠券面值：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.coupon_price)+"元")])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("使用门槛：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s("0.00"==t.couponDetail.use_min_price?"无门槛":"最低消费"+t.couponDetail.use_min_price))])]),t._v(" "),s("div",{staticClass:"list sp100"},[s("label",{staticClass:"name"},[t._v("使用有效期：")]),t._v(" "),t.couponDetail.coupon_time&&0==t.couponDetail.coupon_type?s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.coupon_time)+"天")]):1==t.couponDetail.coupon_type?s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.use_start_time+" - "+t.couponDetail.use_end_time))]):t._e()]),t._v(" "),s("div",{staticClass:"list sp100"},[s("label",{staticClass:"name"},[t._v("领取时间：")]),t._v(" "),1==t.couponDetail.is_timeout?s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.start_time)+" - "+t._s(t.couponDetail.end_time))]):s("span",{staticClass:"info"},[t._v("不限时")])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("类型：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t._f("couponUseTypeFilter")(t.couponDetail.type)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("是否限量：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t._f("filterClose")(t.couponDetail.is_limited)))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("已发布总数：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(0==t.couponDetail.is_limited?"不限量":t.couponDetail.total_count))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("剩余总数：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(0==t.couponDetail.is_limited?"不限量":t.couponDetail.remain_count))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("已发送总数：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.coupon_num))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("已使用总数：")]),t._v(" "),s("span",{staticClass:"info",staticStyle:{color:"red"}},[t._v(t._s(t.couponDetail.useCount))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("发放筛选条件：")]),t._v(" "),t.couponDetail.mark.search?s("span",[t.couponDetail.mark.search["用户标签"]?s("span",{staticClass:"condition"},[t._v("\n                用户标签:"+t._s(t.couponDetail.mark.search["用户标签"])+"\n            ")]):t._e(),t._v(" "),t.couponDetail.mark.search["用户类型"]?s("span",{staticClass:"condition"},[t._v("\n                用户类型:"+t._s(t.couponDetail.mark.search["用户类型"])+"\n            ")]):t._e(),t._v(" "),t.couponDetail.mark.search["性别"]?s("span",{staticClass:"condition"},[t._v("\n                性别:"+t._s(t.couponDetail.mark.search["性别"])+"\n            ")]):t._e(),t._v(" "),t.couponDetail.mark.search["消费情况"]?s("span",{staticClass:"condition"},[t._v("\n                消费情况:"+t._s(t.couponDetail.mark.search["消费情况"])+"\n            ")]):t._e(),t._v(" "),t.couponDetail.mark.search["身份"]?s("span",{staticClass:"condition"},[t._v("\n                身份:"+t._s(t.couponDetail.mark.search["身份"])+"\n            ")]):t._e(),t._v(" "),t.couponDetail.mark.search["访问情况"]?s("span",{staticClass:"condition"},[t._v("\n                访问情况:"+t._s(t.couponDetail.mark.search["访问情况"])+"\n            ")]):t._e(),t._v(" "),t.couponDetail.mark.search["访问时间"]?s("span",{staticClass:"condition"},[t._v("\n                访问时间:"+t._s(t.couponDetail.mark.search["访问时间"])+"\n            ")]):t._e(),t._v(" "),t.couponDetail.mark.search["昵称"]?s("span",{staticClass:"condition"},[t._v("\n                昵称:"+t._s(t.couponDetail.mark.search["昵称"])+"\n            ")]):t._e()]):s("span",[t._v("无")])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("排序：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.sort))])]),t._v(" "),s("div",{staticClass:"list sp"},[s("label",{staticClass:"name"},[t._v("状态：")]),t._v(" "),s("span",{staticClass:"info"},[t._v(t._s(t.couponDetail.status?"开启":"关闭"))])])])])]):t._e(),t._v(" "),s("el-dialog",{staticClass:"modalbox",attrs:{title:t.title,visible:t.dialogVisible,width:"660px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"header clearfix"},[s("div",{staticClass:"filter-container"},[s("el-form",{attrs:{size:"small",inline:"","label-width":"120px"}},[s("el-form-item",{attrs:{label:"优惠券获取方式："}},[s("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:function(e){return t.getIssueList()}},model:{value:t.tableFromIssue.type,callback:function(e){t.$set(t.tableFromIssue,"type",e)},expression:"tableFromIssue.type"}},[s("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),s("el-option",{attrs:{label:"自己领取",value:"receive"}}),t._v(" "),s("el-option",{attrs:{label:"后台发送",value:"send"}}),t._v(" "),s("el-option",{attrs:{label:"新人赠送",value:"new"}}),t._v(" "),s("el-option",{attrs:{label:"买东西赠送",value:"buy"}})],1)],1)],1)],1)]),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],attrs:{data:t.issueData.data,size:"small"}},[s("el-table-column",{attrs:{prop:"user.nickname",label:"用户名","min-width":"150"}}),t._v(" "),s("el-table-column",{attrs:{label:"用户头像","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.user&&t.row.user.avatar?s("div",{staticClass:"demo-image__preview"},[s("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:t.row.user.avatar}})]):s("div",{staticClass:"demo-image__preview"},[s("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:a("cdfe")}})])]}}])}),t._v(" "),s("el-table-column",{attrs:{"min-width":"200",label:"优惠券获取方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s("receive"==e.row.type?"自己领取":"send"==e.row.type?"后台发送":"new"==e.row.type?"新人":"买赠送"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"使用情况","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.use_time?s("span",[t._v(t._s(e.row.use_time))]):s("span",[t._v("未使用")])]}}])})],1),t._v(" "),s("div",{staticClass:"block"},[s("el-pagination",{attrs:{"page-size":t.tableFromIssue.limit,"current-page":t.tableFromIssue.page,layout:"prev, pager, next, jumper",total:t.issueData.total},on:{"size-change":t.handleSizeChangeIssue,"current-change":t.pageChangeIssue}})],1)],1)],1)},i=[],l=a("b7be"),n=a("83d6"),o=a("0b65"),c={name:"CouponSend",data:function(){return{pickerOptions:o["a"],Loading:!1,dialogVisible:!1,detailDialog:!1,roterPre:n["roterPre"],listLoading:!0,title:"领取记录",receiveTime:"领取时间",receiveType:0,timeVal:[],fromList:{title:"选择时间",custom:!0,fromTxt:[{text:"全部",val:""},{text:"今天",val:"today"},{text:"昨天",val:"yesterday"},{text:"最近7天",val:"lately7"},{text:"最近30天",val:"lately30"},{text:"本月",val:"month"},{text:"本年",val:"year"}]},tableData:{data:[],total:0},tableFrom:{page:1,limit:20,status:"",coupon_name:"",coupon_type:"",send_type:"",date:""},tableFromIssue:{page:1,limit:10,send_id:0,type:""},issueData:{data:[],total:0},couponDetail:{}}},mounted:function(){this.getList(1)},methods:{searchReset:function(){this.$refs.searchForm.resetFields(),this.getList(1)},handleClose:function(){this.dialogVisible=!1},details:function(t){this.detailDialog=!0,this.couponDetail=t},usedRecord:function(t){this.dialogVisible=!0,this.title="使用记录",this.receiveTime="使用时间",this.receiveType=1,this.tableFromIssue.send_id=t,this.tableFromIssue.type="send",this.tableFromIssue.page=1,this.getIssueList()},selectChange:function(t){this.timeVal=[],this.tableFrom.date=t,this.getList(1)},onchangeTime:function(t){this.timeVal=t,this.tableFrom.date=t?this.timeVal.join("-"):"",this.getList(1)},getIssueList:function(){var t=this;this.Loading=!0,Object(l["U"])(this.tableFromIssue).then((function(e){t.issueData.data=e.data.list,t.issueData.total=e.data.count,t.Loading=!1})).catch((function(e){t.Loading=!1,t.$message.error(e.message)}))},pageChangeIssue:function(t){this.tableFromIssue.page=t,this.getIssueList()},handleSizeChangeIssue:function(t){this.tableFromIssue.limit=t,this.getIssueList()},getList:function(t){var e=this;this.listLoading=!0,this.tableFrom.page=t||this.tableFrom.page,Object(l["H"])(this.tableFrom).then((function(t){e.tableData.data=t.data.list,e.tableData.total=t.data.count,e.listLoading=!1})).catch((function(t){e.listLoading=!1,e.$message.error(t.message)}))},pageChange:function(t){this.tableFrom.page=t,this.getList("")},handleSizeChange:function(t){this.tableFrom.limit=t,this.getList("")}}},r=c,u=(a("32e6"),a("2877")),_=Object(u["a"])(r,s,i,!1,null,"d623ba9a",null);e["default"]=_.exports},cdfe:function(t,e,a){t.exports=a.p+"mer/img/f.5aa43cd3.png"},ce5a:function(t,e,a){}}]);