(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00ec5156"],{"5c20":function(e,t,n){"use strict";n("75ee")},"75a4":function(e,t,n){"use strict";n("9e33")},"75ee":function(e,t,n){},"7b2a":function(e,t,n){},"9e33":function(e,t,n){},a576:function(e,t,n){"use strict";n("7b2a")},b7be:function(e,t,n){"use strict";n.d(t,"Ob",(function(){return a})),n.d(t,"Nb",(function(){return i})),n.d(t,"Jb",(function(){return o})),n.d(t,"Ib",(function(){return s})),n.d(t,"Hb",(function(){return c})),n.d(t,"Kb",(function(){return l})),n.d(t,"Lb",(function(){return u})),n.d(t,"Mb",(function(){return d})),n.d(t,"W",(function(){return f})),n.d(t,"R",(function(){return m})),n.d(t,"S",(function(){return p})),n.d(t,"U",(function(){return h})),n.d(t,"T",(function(){return b})),n.d(t,"Bb",(function(){return v})),n.d(t,"Q",(function(){return g})),n.d(t,"x",(function(){return _})),n.d(t,"D",(function(){return w})),n.d(t,"v",(function(){return k})),n.d(t,"u",(function(){return y})),n.d(t,"w",(function(){return x})),n.d(t,"Cb",(function(){return C})),n.d(t,"Db",(function(){return D})),n.d(t,"Yb",(function(){return F})),n.d(t,"A",(function(){return O})),n.d(t,"z",(function(){return I})),n.d(t,"E",(function(){return $})),n.d(t,"i",(function(){return S})),n.d(t,"Xb",(function(){return j})),n.d(t,"Ub",(function(){return L})),n.d(t,"Wb",(function(){return z})),n.d(t,"Tb",(function(){return M})),n.d(t,"Vb",(function(){return V})),n.d(t,"Qb",(function(){return T})),n.d(t,"Zb",(function(){return N})),n.d(t,"y",(function(){return R})),n.d(t,"C",(function(){return P})),n.d(t,"B",(function(){return E})),n.d(t,"O",(function(){return W})),n.d(t,"G",(function(){return B})),n.d(t,"J",(function(){return A})),n.d(t,"K",(function(){return U})),n.d(t,"I",(function(){return G})),n.d(t,"L",(function(){return q})),n.d(t,"P",(function(){return H})),n.d(t,"N",(function(){return K})),n.d(t,"M",(function(){return Y})),n.d(t,"F",(function(){return J})),n.d(t,"H",(function(){return Q})),n.d(t,"V",(function(){return X})),n.d(t,"nb",(function(){return Z})),n.d(t,"mb",(function(){return ee})),n.d(t,"Sb",(function(){return te})),n.d(t,"fb",(function(){return ne})),n.d(t,"cc",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"ab",(function(){return ie})),n.d(t,"bb",(function(){return oe})),n.d(t,"Rb",(function(){return se})),n.d(t,"X",(function(){return ce})),n.d(t,"o",(function(){return le})),n.d(t,"n",(function(){return ue})),n.d(t,"m",(function(){return de})),n.d(t,"l",(function(){return fe})),n.d(t,"k",(function(){return me})),n.d(t,"Y",(function(){return pe})),n.d(t,"t",(function(){return he})),n.d(t,"r",(function(){return be})),n.d(t,"q",(function(){return ve})),n.d(t,"s",(function(){return ge})),n.d(t,"p",(function(){return _e})),n.d(t,"ib",(function(){return we})),n.d(t,"gb",(function(){return ke})),n.d(t,"kb",(function(){return ye})),n.d(t,"hb",(function(){return xe})),n.d(t,"jb",(function(){return Ce})),n.d(t,"Z",(function(){return De})),n.d(t,"zb",(function(){return Fe})),n.d(t,"yb",(function(){return Oe})),n.d(t,"wb",(function(){return Ie})),n.d(t,"Ab",(function(){return $e})),n.d(t,"eb",(function(){return Se})),n.d(t,"vb",(function(){return je})),n.d(t,"xb",(function(){return Le})),n.d(t,"ub",(function(){return ze})),n.d(t,"qb",(function(){return Me})),n.d(t,"sb",(function(){return Ve})),n.d(t,"rb",(function(){return Te})),n.d(t,"lb",(function(){return Ne})),n.d(t,"db",(function(){return Re})),n.d(t,"ob",(function(){return Pe})),n.d(t,"tb",(function(){return Ee})),n.d(t,"pb",(function(){return We})),n.d(t,"a",(function(){return Be})),n.d(t,"ac",(function(){return Ae})),n.d(t,"d",(function(){return Ue})),n.d(t,"f",(function(){return Ge})),n.d(t,"c",(function(){return qe})),n.d(t,"j",(function(){return He})),n.d(t,"b",(function(){return Ke})),n.d(t,"h",(function(){return Ye})),n.d(t,"e",(function(){return Je})),n.d(t,"g",(function(){return Qe}));var r=n("0c6d");function a(e){return r["a"].get("/store/coupon/platformLst",e)}function i(e){return r["a"].get("/store/coupon/update/".concat(e,"/form"))}function o(e){return r["a"].get("/store/coupon/show/".concat(e))}function s(e){return r["a"].delete("store/coupon/delete/".concat(e))}function c(e){return r["a"].get("/store/coupon/sys/clone/".concat(e,"/form"))}function l(e){return r["a"].get("store/coupon/sys/issue",e)}function u(e,t){return r["a"].get("store/coupon/show_lst/".concat(e),t)}function d(e){return r["a"].get("/store/coupon/send/lst",e)}function f(e){return r["a"].post("store/coupon/send",e)}function m(e){return r["a"].get("store/coupon/detail/".concat(e))}function p(e){return r["a"].get("store/coupon/lst",e)}function h(e,t){return r["a"].post("store/coupon/status/".concat(e),{status:t})}function b(){return r["a"].get("store/coupon/create/form")}function v(e){return r["a"].get("store/coupon/issue",e)}function g(e){return r["a"].delete("store/coupon/delete/".concat(e))}function _(e){return r["a"].get("broadcast/room/lst",e)}function w(e,t){return r["a"].post("broadcast/room/status/".concat(e),t)}function k(e){return r["a"].delete("broadcast/room/delete/".concat(e))}function y(e){return r["a"].get("broadcast/room/apply/form/".concat(e))}function x(e){return r["a"].get("broadcast/room/detail/".concat(e))}function C(e,t){return r["a"].post("broadcast/room/feedsPublic/".concat(e),{status:t})}function D(e,t){return r["a"].post("broadcast/room/comment/".concat(e),{status:t})}function F(e,t){return r["a"].post("broadcast/room/closeKf/".concat(e),{status:t})}function O(e){return r["a"].get("broadcast/goods/lst",e)}function I(e){return r["a"].get("broadcast/goods/detail/".concat(e))}function $(e,t){return r["a"].post("broadcast/goods/status/".concat(e),t)}function S(e){return r["a"].get("broadcast/goods/apply/form/".concat(e))}function j(){return r["a"].get("seckill/config/create/form")}function L(e){return r["a"].get("seckill/config/lst",e)}function z(e){return r["a"].get("seckill/config/update/".concat(e,"/form"))}function M(e){return r["a"].delete("seckill/config/delete/".concat(e))}function V(e,t){return r["a"].post("seckill/config/status/".concat(e),{status:t})}function T(e,t){return r["a"].get("seckill/product/detail/".concat(e),t)}function N(e,t){return r["a"].get("broadcast/room/goods/".concat(e),t)}function R(e){return r["a"].delete("broadcast/goods/delete/".concat(e))}function P(e,t){return r["a"].post("broadcast/room/sort/".concat(e),t)}function E(e,t){return r["a"].post("broadcast/goods/sort/".concat(e),t)}function W(e){return r["a"].post("config/others/group_buying",e)}function B(){return r["a"].get("config/others/group_buying")}function A(e){return r["a"].get("store/product/group/lst",e)}function U(e){return r["a"].get("store/product/group/get/".concat(e))}function G(e){return r["a"].get("store/product/group/detail/".concat(e))}function q(e){return r["a"].post("store/product/group/status",e)}function H(e,t){return r["a"].post("store/product/group/is_show/".concat(e),{status:t})}function K(e){return r["a"].get("store/product/group/get/".concat(e))}function Y(e,t){return r["a"].post("store/product/group/update/".concat(e),t)}function J(e){return r["a"].get("store/product/group/buying/lst",e)}function Q(e,t){return r["a"].get("store/product/group/buying/detail/".concat(e),t)}function X(e,t){return r["a"].get("store/coupon/product/".concat(e),t)}function Z(){return r["a"].get("user/integral/title")}function ee(e){return r["a"].get("user/integral/lst",e)}function te(e){return r["a"].get("user/integral/excel",e)}function ne(){return r["a"].get("user/integral/config")}function re(e){return r["a"].post("user/integral/config",e)}function ae(e){return r["a"].get("discounts/lst",e)}function ie(e,t){return r["a"].post("discounts/status/".concat(e),{status:t})}function oe(e){return r["a"].get("discounts/detail/".concat(e))}function se(e){return r["a"].get("marketing/spu/lst",e)}function ce(e){return r["a"].post("activity/atmosphere/create",e)}function le(e,t){return r["a"].post("activity/atmosphere/update/".concat(e),t)}function ue(e){return r["a"].get("activity/atmosphere/lst",e)}function de(e){return r["a"].get("activity/atmosphere/detail/".concat(e))}function fe(e,t){return r["a"].post("activity/atmosphere/status/".concat(e),{status:t})}function me(e){return r["a"].delete("activity/atmosphere/delete/".concat(e))}function pe(e){return r["a"].post("activity/border/create",e)}function he(e,t){return r["a"].post("activity/border/update/".concat(e),t)}function be(e){return r["a"].get("activity/border/lst",e)}function ve(e){return r["a"].get("activity/border/detail/".concat(e))}function ge(e,t){return r["a"].post("activity/border/status/".concat(e),{status:t})}function _e(e){return r["a"].delete("activity/border/delete/".concat(e))}function we(){return r["a"].get("points/cate/lst")}function ke(){return r["a"].get("points/cate/create/form")}function ye(e){return r["a"].get("points/cate/update/form/".concat(e))}function xe(e){return r["a"].delete("points/cate/delete/".concat(e))}function Ce(e,t){return r["a"].post("points/cate/status/".concat(e),{status:t})}function De(e){return r["a"].post("points/product/create",e)}function Fe(e,t){return r["a"].post("points/product/update/".concat(e),t)}function Oe(e){return r["a"].get("points/product/lst",e)}function Ie(e){return r["a"].delete("points/product/delete/".concat(e))}function $e(e,t){return r["a"].post("points/product/status/".concat(e),{status:t})}function Se(e,t){return r["a"].post("points/product/get_attr_value/".concat(e),t)}function je(){return r["a"].get("points/cate/select")}function Le(e){return r["a"].get("points/product/detail/".concat(e))}function ze(e){return r["a"].get("points/order/lst",e)}function Me(e){return r["a"].get("points/order/detail/".concat(e))}function Ve(e){return r["a"].get("points/order/express/".concat(e))}function Te(e){return r["a"].get("points/order/excel",e)}function Ne(e,t){return r["a"].post("points/order/delivery/".concat(e),t)}function Re(e){return r["a"].get("store/express/options",e)}function Pe(e){return r["a"].get("points/order/mark/".concat(e,"/form"))}function Ee(e,t){return r["a"].get("points/order/status/".concat(e),t)}function We(e){return r["a"].delete("points/order/delete/".concat(e))}function Be(e){return r["a"].post("activity/form/create",e)}function Ae(){return r["a"].get("system/form/select")}function Ue(e){return r["a"].get("activity/form/lst",e)}function Ge(e,t){return r["a"].post("activity/form/status/".concat(e),{status:t})}function qe(e){return r["a"].get("activity/form/detail/".concat(e))}function He(e,t){return r["a"].get("system/form/info/".concat(e),t)}function Ke(e){return r["a"].delete("activity/form/delete/".concat(e))}function Ye(e,t){return r["a"].get("activity/form/user/lst/".concat(e),t)}function Je(e,t){return r["a"].get("activity/form/excel/".concat(e),t)}function Qe(e,t){return r["a"].post("activity/form/update/".concat(e),t)}},b9c2:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"divBox"},[n("div",{staticClass:"selCard"},[n("el-form",{ref:"searchForm",attrs:{model:e.userFrom,inline:"",size:"small","label-width":"85px"}},[e.collapse?n("div",{staticClass:"acea-row search-form"},[n("div",[n("el-form-item",{attrs:{label:"用户搜索："}},[n("el-input",{staticClass:"input-with-select selWidth",attrs:{placeholder:"请输入内容",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeSearch(1)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("el-select",{attrs:{slot:"prepend",clearable:"",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[n("el-option",{attrs:{label:"全部",value:""}},[e._v("全部")]),e._v(" "),n("el-option",{attrs:{label:"用户昵称",value:"nickname"}},[e._v("用户昵称")]),e._v(" "),n("el-option",{attrs:{label:"手机号",value:"phone"}},[e._v("手机号")]),e._v(" "),n("el-option",{attrs:{label:"用户ID",value:"uid"}},[e._v("用户ID")])],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户分组：",prop:"group_id"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.group_id,callback:function(t){e.$set(e.userFrom,"group_id",t)},expression:"userFrom.group_id"}},e._l(e.groupList,(function(e,t){return n("el-option",{key:t,attrs:{value:e.group_id,label:e.group_name}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户标签：",prop:"label_id"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.label_id,callback:function(t){e.$set(e.userFrom,"label_id",t)},expression:"userFrom.label_id"}},e._l(e.labelLists,(function(e,t){return n("el-option",{key:t,attrs:{value:e.label_id,label:e.label_name}})})),1)],1)],1),e._v(" "),n("el-form-item",{staticClass:"search-form-sub"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.changeSearch(1)}}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.searchReset()}}},[e._v("重置")]),e._v(" "),n("a",{staticClass:"ivu-ml-8 font12 ml10",on:{click:function(t){e.collapse=!e.collapse}}},[e.collapse?[e._v(" 展开 "),n("i",{staticClass:"el-icon-arrow-down"})]:[e._v(" 收起 "),n("i",{staticClass:"el-icon-arrow-up"})]],2)],1)],1):n("div",{staticClass:"acea-row search-form"},[n("div",{staticClass:"search-form-box"},[n("el-form-item",{attrs:{label:"用户搜索："}},[n("el-input",{staticClass:"input-with-select selWidth",attrs:{placeholder:"请输入内容",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeSearch(1)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[n("el-select",{attrs:{slot:"prepend",clearable:"",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[n("el-option",{attrs:{label:"全部",value:""}},[e._v("全部")]),e._v(" "),n("el-option",{attrs:{label:"用户昵称",value:"nickname"}},[e._v("用户昵称")]),e._v(" "),n("el-option",{attrs:{label:"手机号",value:"phone"}},[e._v("手机号")]),e._v(" "),n("el-option",{attrs:{label:"用户ID",value:"uid"}},[e._v("用户ID")])],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户分组：",prop:"group_id"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.group_id,callback:function(t){e.$set(e.userFrom,"group_id",t)},expression:"userFrom.group_id"}},e._l(e.groupList,(function(e,t){return n("el-option",{key:t,attrs:{value:e.group_id,label:e.group_name}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户标签：",prop:"label_id"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.label_id,callback:function(t){e.$set(e.userFrom,"label_id",t)},expression:"userFrom.label_id"}},e._l(e.labelLists,(function(e,t){return n("el-option",{key:t,attrs:{value:e.label_id,label:e.label_name}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户类型：",prop:"is_svip"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.is_svip,callback:function(t){e.$set(e.userFrom,"is_svip",t)},expression:"userFrom.is_svip"}},[n("el-option",{attrs:{value:"0",label:"普通用户"}},[e._v("普通用户")]),e._v(" "),n("el-option",{attrs:{value:"1",label:"付费会员"}},[e._v("付费会员")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"用户等级：",prop:"member_level"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.member_level,callback:function(t){e.$set(e.userFrom,"member_level",t)},expression:"userFrom.member_level"}},e._l(e.memberList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"消费情况：",prop:"pay_count"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.pay_count,callback:function(t){e.$set(e.userFrom,"pay_count",t)},expression:"userFrom.pay_count"}},[n("el-option",{attrs:{value:"-1",label:"0次"}}),e._v(" "),n("el-option",{attrs:{value:"0",label:"1次及以上"}}),e._v(" "),n("el-option",{attrs:{value:"1",label:"2次及以上"}}),e._v(" "),n("el-option",{attrs:{value:"2",label:"3次及以上"}}),e._v(" "),n("el-option",{attrs:{value:"3",label:"4次及以上"}}),e._v(" "),n("el-option",{attrs:{value:"4",label:"5次及以上"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"访问时间："}},[n("el-date-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"yyyy/MM/dd",align:"right","unlink-panels":"",format:"yyyy/MM/dd",size:"small",type:"daterange",placement:"bottom-end",placeholder:"自定义时间","picker-options":e.pickerOptions},on:{change:e.onchangeTime},model:{value:e.timeVal,callback:function(t){e.timeVal=t},expression:"timeVal"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"访问情况：",prop:"user_time_type"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.user_time_type,callback:function(t){e.$set(e.userFrom,"user_time_type",t)},expression:"userFrom.user_time_type"}},[n("el-option",{attrs:{value:"visit",label:"最后访问"}}),e._v(" "),n("el-option",{attrs:{value:"add_time",label:"首次访问"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.sex,callback:function(t){e.$set(e.userFrom,"sex",t)},expression:"userFrom.sex"}},[n("el-option",{attrs:{value:"1",label:"男"}},[e._v("男")]),e._v(" "),n("el-option",{attrs:{value:"2",label:"女"}},[e._v("女")]),e._v(" "),n("el-option",{attrs:{value:"0",label:"保密"}},[e._v("保密")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"身份：",prop:"is_promoter"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:function(t){return e.changeSearch(1)}},model:{value:e.userFrom.is_promoter,callback:function(t){e.$set(e.userFrom,"is_promoter",t)},expression:"userFrom.is_promoter"}},[n("el-option",{attrs:{value:"1",label:"推广员"}},[e._v("推广员")]),e._v(" "),n("el-option",{attrs:{value:"0",label:"普通会员"}},[e._v("普通会员")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"生日："}},[n("el-date-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"yyyy/MM/dd",align:"right","unlink-panels":"",format:"yyyy/MM/dd",size:"small",type:"daterange",placement:"bottom-end",placeholder:"自定义时间","picker-options":e.pickerOptions},on:{change:e.onchangeTime2},model:{value:e.timeVal2,callback:function(t){e.timeVal2=t},expression:"timeVal2"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"信息补充："}},[n("el-input",{staticClass:"input-with-select selWidth",attrs:{placeholder:"请输入内容",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.changeSearch(1)}},model:{value:e.userFrom.fields_value,callback:function(t){e.$set(e.userFrom,"fields_value",t)},expression:"userFrom.fields_value"}},[n("el-select",{attrs:{slot:"prepend",clearable:"",placeholder:"请选择"},slot:"prepend",model:{value:e.userFrom.fields_type,callback:function(t){e.$set(e.userFrom,"fields_type",t)},expression:"userFrom.fields_type"}},e._l(e.selectList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e._v(" "),n("el-form-item",{staticClass:"search-form-sub"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.changeSearch(1)}}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.searchReset()}}},[e._v("重置")]),e._v(" "),n("a",{staticClass:"ivu-ml-8 font12 ml10",on:{click:function(t){e.collapse=!e.collapse}}},[e.collapse?[e._v(" 展开 "),n("i",{staticClass:"el-icon-arrow-down"})]:[e._v(" 收起 "),n("i",{staticClass:"el-icon-arrow-up"})]],2)],1)],1)])],1),e._v(" "),n("el-card",{staticClass:"mt14"},[n("div",[n("div",{staticClass:"mb20"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createUser}},[e._v("创建用户")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:"wechat"===e.user_type,expression:"user_type === 'wechat'"}],attrs:{size:"small"},on:{click:e.sendNews}},[e._v("发送图文消息")]),e._v(" "),n("el-button",{attrs:{disabled:0==e.checkedIds.length,size:"small"},on:{click:e.batchGroup}},[e._v("批量设置分组")]),e._v(" "),n("el-button",{attrs:{disabled:0==e.checkedIds.length,size:"small"},on:{click:e.batchlabel}},[e._v("批量设置标签")]),e._v(" "),n("el-button",{attrs:{disabled:0==e.checkedIds.length,size:"small"},on:{click:e.setDistributor}},[e._v("批量设置分销员")]),e._v(" "),n("el-button",{attrs:{disabled:0==e.checkedIds.length,label:"default",size:"small"},on:{click:e.sendCoupon}},[e._v("发送优惠券")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.exportList}},[e._v("导出列表")])],1),e._v(" "),e.checkedIds.length>0||e.allCheck?n("el-alert",{staticClass:"mb10",attrs:{title:e.allCheck?"已选择  "+e.tableData.total+"  项":"已选择  "+e.checkedIds.length+"  项",type:"info","show-icon":""}}):e._e()],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.tableData.data,size:"small","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"首次访问："}},[n("span",[e._v(e._s(t.row.create_time))])]),e._v(" "),n("el-form-item",{attrs:{label:"近次访问："}},[n("span",[e._v(e._s(t.row.last_time))])]),e._v(" "),n("el-form-item",{attrs:{label:"身份证号："}},[n("span",[e._v(e._s(t.row.card_id))])]),e._v(" "),n("el-form-item",{attrs:{label:"手机号："}},[n("span",[e._v(e._s(t.row.phone))])]),e._v(" "),n("el-form-item",{attrs:{label:"真实姓名："}},[n("span",[e._v(e._s(t.row.real_name))])]),e._v(" "),n("el-form-item",{attrs:{label:"标签："}},e._l(t.row.label,(function(t,r){return n("span",{key:r,domProps:{textContent:e._s(t)}})})),0),e._v(" "),n("el-form-item",{attrs:{label:"生日："}},[n("span",[e._v(e._s(t.row.birthday))])]),e._v(" "),n("el-form-item",{attrs:{label:"地址："}},[n("span",{staticClass:"minwidth"},[e._v(e._s(t.row.addres))])]),e._v(" "),n("el-form-item",{attrs:{label:"备注："}},[n("span",[e._v(e._s(t.row.mark))])])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-popover",{staticClass:"tabPop",attrs:{placement:"top-start",width:"100",trigger:"hover"}},[n("div",[n("span",{staticClass:"spBlock onHand",class:{check:"dan"===e.chkName},on:{click:function(n){return e.onHandle("dan",t.$index)}}},[e._v("选中本页")]),e._v(" "),n("span",{staticClass:"spBlock onHand",class:{check:"duo"===e.chkName},on:{click:function(t){return e.onHandle("duo")}}},[e._v("选中全部")])]),e._v(" "),n("el-checkbox",{attrs:{slot:"reference",value:"dan"===e.chkName&&e.checkedPage.indexOf(e.userFrom.page)>-1||"duo"===e.chkName},on:{change:e.changeType},slot:"reference"})],1)]}},{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{disabled:t.row.cancel_time,value:!t.row.cancel_time&&(e.checkedIds.indexOf(t.row.uid)>-1||"duo"===e.chkName&&-1===e.noChecked.indexOf(t.row.uid))},on:{change:function(n){return e.changeOne(n,t.row)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"uid",label:"ID","min-width":"60"}}),e._v(" "),n("el-table-column",{attrs:{label:"头像","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"demo-image__preview"},[n("el-image",{staticStyle:{width:"36px",height:"36px"},attrs:{src:t.row.avatar?t.row.avatar:e.moren,"preview-src-list":[t.row.avatar||e.moren]}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"昵称","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("div",{staticClass:"acea-row"},[n("i",{directives:[{name:"show",rawName:"v-show",value:1===r.sex,expression:"row.sex === 1"}],staticClass:"el-icon-male mr5",staticStyle:{"font-size":"15px","margin-top":"3px",color:"#2db7f5"}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:2===r.sex,expression:"row.sex === 2"}],staticClass:"el-icon-female mr5",staticStyle:{"font-size":"15px","margin-top":"3px",color:"#ed4014"}}),e._v(" "),n("div",{domProps:{textContent:e._s(r.nickname)}})])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{label:"等级","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.member?r.member.brokerage_name:"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"分组","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.group?r.group.group_name:"无"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"推荐人","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.spread?r.spread.nickname+" / "+r.spread.uid:"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"上级","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.superior?r.superior.nickname+" / "+r.superior.uid:"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"now_money",label:"余额",sortable:"","min-width":"100","sort-method":function(e,t){return e.now_money-t.now_money}}}),e._v(" "),n("el-table-column",{attrs:{prop:"integral",label:"当前积分","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"coupon_amount",label:"抵用券","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cancel_time?e._e():n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.onDetails(t.row.uid)}}},[e._v("详情")]),e._v(" "),n("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(n){return e.onEdit(t.row.uid)}}},[e._v("编辑")]),e._v(" "),n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                            更多"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.row.cancel_time?e._e():n("el-dropdown-item",{nativeOn:{click:function(n){return e.setMoney(t.row)}}},[e._v("设置余额")]),e._v(" "),t.row.cancel_time?e._e():n("el-dropdown-item",{nativeOn:{click:function(n){return e.changeIntegral(t.row)}}},[e._v("设置抵用券")]),e._v(" "),t.row.vip_name&&!t.row.cancel_time?n("el-dropdown-item",[e._v("清除等级")]):e._e(),e._v(" "),t.row.cancel_time?e._e():n("el-dropdown-item",{nativeOn:{click:function(n){return e.setLabel(t.row)}}},[e._v("设置标签")]),e._v(" "),t.row.cancel_time?e._e():n("el-dropdown-item",{nativeOn:{click:function(n){return e.setSuperior(t.row)}}},[e._v("修改上级")]),e._v(" "),t.row.cancel_time?e._e():n("el-dropdown-item",{nativeOn:{click:function(n){return e.setModify(t.row)}}},[e._v("修改推荐人")]),e._v(" "),t.row.cancel_time?e._e():n("el-dropdown-item",{nativeOn:{click:function(n){return e.setPassword(t.row)}}},[e._v("修改密码")]),e._v(" "),t.row.cancel_time?e._e():n("el-dropdown-item",{nativeOn:{click:function(n){return e.setAgent(t.row)}}},[e._v("修改绑定代理")])],1)],1)]}}])})],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{background:"","page-size":e.userFrom.limit,"current-page":e.userFrom.page,layout:"total, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange}})],1)],1),e._v(" "),n("el-dialog",{staticClass:"dia",attrs:{title:"提示",visible:e.visible,width:"1000px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[e.visible?n("news-category",{attrs:{"is-show-send":e.isShowSend,"wechat-ids":e.wechatIds,"user-ids":e.ids,"max-cols":e.maxCols}}):e._e()],1),e._v(" "),n("user-create",{ref:"userCreate",attrs:{createDrawer:e.createDrawer},on:{closeDrawer:e.closeDrawer,getList:e.changeSearch}}),e._v(" "),n("user-detail",{ref:"userDetails",attrs:{drawer:e.drawer,isUser:!0,labelLists:e.labelLists,groupList:e.groupList,memberList:e.memberList,"cancel-time":e.cancel_time},on:{closeDrawer:e.closeDrawer,changeDrawer:e.changeDrawer,onEdit:e.onEdit,setMoney:e.setMoney,changeIntegral:e.changeIntegral,setGroup:e.setGroup,setLabel:e.setLabel,setModify:e.setModify,setAgent:e.setAgent,setSuperior:e.setSuperior,setPassword:e.setPassword,setMember:e.setMember,giveMember:e.giveMember}}),e._v(" "),e.visibleCoupon?n("el-dialog",{attrs:{title:"优惠券列表",visible:e.visibleCoupon,width:"1000px"},on:{"update:visible":function(t){e.visibleCoupon=t}}},[e.visibleCoupon?n("coupon-List",{ref:"couponList",attrs:{couponForm:e.couponForm,checkedIds:e.checkedIds,allCheck:e.allCheck,userFrom:e.userFrom},on:{sendSuccess:e.sendSuccess}}):e._e()],1):e._e(),e._v(" "),n("group-area-select",{attrs:{visible:e.groupAreaVisible,title:"设置用户分组和地区",userData:e.currentUser},on:{"update:visible":function(t){e.groupAreaVisible=t},submit:e.submitGroupArea,close:function(t){e.groupAreaVisible=!1}}})],1)},a=[],i=(n("456d"),n("7514"),n("c7eb")),o=(n("96cf"),n("1da1")),s=(n("ac6a"),n("ade3")),c=n("c24f"),l=n("c42b"),u=n("a9c2"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-drawer",{attrs:{"with-header":!1,size:800,visible:e.createDrawer,direction:"rtl","before-close":e.handleClose},on:{"update:visible":function(t){e.createDrawer=t}}},[n("div",[n("div",{staticClass:"head"},[n("div",{staticClass:"title"},[e._v("用户信息填写")])]),e._v(" "),n("div",{staticClass:"demo-drawer__content"},[n("el-row",{staticClass:"mt20"},[n("el-col",{attrs:{span:18}},[n("el-form",{ref:"userField",attrs:{size:"small",rules:e.ruleValidate,model:e.userInfo,"label-width":"130px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"手机号(账号)：",prop:"account"}},[n("el-input",{attrs:{type:"text",size:"small",placeholder:"请输入手机号(账号)"},model:{value:e.userInfo.account,callback:function(t){e.$set(e.userInfo,"account",t)},expression:"userInfo.account"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"登录密码：",prop:"pwd"}},[n("el-input",{attrs:{type:"password",size:"small",minlength:"6",placeholder:"请输入密码"},model:{value:e.userInfo.pwd,callback:function(t){e.$set(e.userInfo,"pwd",t)},expression:"userInfo.pwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确认密码：",prop:"repwd"}},[n("el-input",{attrs:{type:"password",size:"small",minlength:"6",placeholder:"请再次输入密码"},model:{value:e.userInfo.repwd,callback:function(t){e.$set(e.userInfo,"repwd",t)},expression:"userInfo.repwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户昵称：",prop:"nickname"}},[n("el-input",{attrs:{type:"text",size:"small",placeholder:"请输入用户昵称"},model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"头像："}},[n("div",{staticClass:"upLoadPicBox"},[e.userInfo.avatar?n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:e.userInfo.avatar}}),e._v(" "),n("i",{staticClass:"el-icon-error btndel",on:{click:function(t){e.userInfo.avatar=""}}})]):n("div",{staticClass:"upLoad",on:{click:function(t){return e.modalPicTap("1")}}},[n("i",{staticClass:"el-icon-camera cameraIconfont"})])])]),e._v(" "),n("el-form-item",{attrs:{label:"真实姓名："}},[n("el-input",{attrs:{type:"text",size:"small",placeholder:"请输入真实姓名"},model:{value:e.userInfo.real_name,callback:function(t){e.$set(e.userInfo,"real_name",t)},expression:"userInfo.real_name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号："}},[n("el-input",{attrs:{type:"text",placeholder:"请输入手机号",size:"small"},model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"身份证：",prop:"card_id"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入身份证号码",size:"small"},model:{value:e.userInfo.card_id,callback:function(t){e.$set(e.userInfo,"card_id",t)},expression:"userInfo.card_id"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"性别："}},[n("el-radio-group",{model:{value:e.userInfo.sex,callback:function(t){e.$set(e.userInfo,"sex",t)},expression:"userInfo.sex"}},[n("el-radio",{attrs:{label:0}},[e._v("保密")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"状态：",required:""}},[n("el-radio-group",{model:{value:e.userInfo.status,callback:function(t){e.$set(e.userInfo,"status",t)},expression:"userInfo.status"}},[n("el-radio",{attrs:{label:0}},[e._v("禁用")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("正常")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"推广员：",required:""}},[n("el-radio-group",{model:{value:e.userInfo.is_promoter,callback:function(t){e.$set(e.userInfo,"is_promoter",t)},expression:"userInfo.is_promoter"}},[n("el-radio",{attrs:{label:0}},[e._v("关闭")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("开启")])],1)],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:23}},[n("div",{staticClass:"demo-drawer__footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading,size:"small"},on:{click:function(t){return e.submitForm("userField")}}},[e._v(e._s(e.loading?"提交中 ...":"确 定"))])],1)])],1)],1)])])],1)},f=[],m=(n("7f7f"),{name:"UserCreate",props:{createDrawer:{type:Boolean,default:!1}},data:function(){var e=this,t=function(e,t,n){if(!t)return n(new Error("请输入手机号"));/^1[3456789]\d{9}$/.test(t)?n():n(new Error("格式不正确!"))},n=function(e,t,n){t&&!/^[1-9]\d{5}(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[Xx\d]$/.test(t)?n(new Error("格式不正确!")):n()},r=function(t,n,r){""===n?r(new Error("请再次输入密码")):n!==e.userInfo.pwd?r(new Error("两次输入密码不一致!")):r()};return{loading:!1,userInfo:{avatar:"",sex:0,status:1,is_promoter:1,province_id:0,city_id:0,district_id:0},ruleValidate:{account:[{required:!0,validator:t,trigger:"blur"}],phone:[{validator:t,trigger:"blur"}],card_id:[{validator:n,trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],repwd:[{required:!0,validator:r,trigger:"blur"}]},selectedRegion:[],province_id:[],city_id:[],district_id:[],cascaderProps:{lazy:!0,lazyLoad:this.loadCities,value:"id",label:"name",checkStrictly:!0,expandTrigger:"hover",emitPath:!0}}},mounted:function(){},methods:{handleRegionChange:function(e){console.log(e),this.userInfo.province_id=e[0],this.userInfo.city_id=e[1],this.userInfo.district_id=e[2]},loadCities:function(e,t){var n=e.level,r=e.value,a=0;1!==n&&2!==n||(a=r),Object(c["v"])(a).then((function(e){var r=e.data.map((function(e){return{id:e.id,name:e.name,leaf:n>=2}}));t(r)})).catch((function(){t([])}))},handleClose:function(){this.resetData(),this.$emit("closeDrawer")},resetData:function(){this.$refs.userField.resetFields(),this.userInfo.avatar="",this.userInfo.phone="",this.userInfo.real_name="",this.userInfo.card_id="",this.userInfo.birthday="",this.userInfo.sex=0,this.userInfo.province_id=0,this.userInfo.city_id=0,this.userInfo.area_id=0},modalPicTap:function(e,t,n){var r=this;this.$modalUpload((function(e){r.userInfo.avatar=e[0]}),e)},submitForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate((function(e){e?Object(c["d"])(t.userInfo).then(function(){var e=Object(o["a"])(Object(i["a"])().mark((function e(n){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!1,t.$message.success(n.message),t.$emit("closeDrawer"),t.$emit("getList");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$message.error(e.message)})):t.loading=!1}))}}}),p=m,h=(n("5c20"),n("2877")),b=Object(h["a"])(p,d,f,!1,null,"062da12a",null),v=b.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"divBox"},[n("div",{staticClass:"header clearfix"},[n("div",{staticClass:"container"},[n("el-form",{attrs:{inline:"",size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"优惠劵名称："}},[n("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入优惠券名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(1)}},model:{value:e.tableFrom.coupon_name,callback:function(t){e.$set(e.tableFrom,"coupon_name",t)},expression:"tableFrom.coupon_name"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getList(1)}}},[e._v("查询")])],1)],1)],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"table",attrs:{data:e.tableData.data,size:"small","max-height":"400","tooltip-effect":"dark"}},[n("el-table-column",{attrs:{width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio",{attrs:{label:t.row.coupon_id},nativeOn:{change:function(n){return e.getTemplateRow(t.row)}},model:{value:e.templateRadio,callback:function(t){e.templateRadio=t},expression:"templateRadio"}},[e._v(" ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"coupon_id",label:"ID","min-width":"50"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"优惠券名称","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{label:"优惠劵类型","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(e._f("couponTypeFilter")(r.type)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"coupon_price",label:"优惠券面值","min-width":"90"}}),e._v(" "),n("el-table-column",{attrs:{label:"最低消费额","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(0===t.row.use_min_price?"不限制":t.row.use_min_price))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"有效期限","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(1===t.row.coupon_type?t.row.use_start_time+"-"+t.row.use_end_time:t.row.coupon_time+"天"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"剩余数量","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(0===t.row.is_limited?"不限量":t.row.remain_count))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small",disabled:e.multipleSelection.coupon_id!=t.row.coupon_id},on:{click:function(n){return e.send(t.row.coupon_id)}}},[e._v("发送")])]}}])})],1),e._v(" "),n("div",{staticClass:"block mb20"},[n("el-pagination",{attrs:{background:"","page-size":e.tableFrom.limit,"current-page":e.tableFrom.page,layout:"total, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange}})],1),e._v(" "),n("div")],1)},_=[],w=n("b7be"),k=n("83d6"),y={name:"CouponList",props:{couponForm:{type:Object,required:!0},checkedIds:{type:Array,default:[]},allCheck:{type:Boolean,default:!1},userFrom:{type:Object,required:!0}},data:function(){return{roterPre:k["roterPre"],listLoading:!0,tableData:{data:[],total:0},tableFrom:{page:1,limit:5,not_send_type:5,coupon_name:"",status:1},multipleSelection:{coupon_id:""},templateRadio:0}},mounted:function(){this.tableFrom.page=1,this.getList(1)},methods:{getTemplateRow:function(e){this.multipleSelection={coupon_id:e.coupon_id}},send:function(e){var t=this;delete this.userFrom["page"],delete this.userFrom["limit"];var n=this;n.$confirm("确定要发送优惠券吗？发送优惠券后将无法恢复，请谨慎操作！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={coupon_id:e,search:n.userFrom,mark:n.filter(t.couponForm),is_all:n.allCheck?1:0,uid:n.checkedIds};Object(w["W"])(r).then((function(e){n.$message.success(e.message),n.$emit("sendSuccess")})).catch((function(e){n.$message.error(e.message)}))})).catch((function(e){n.$message({type:"info",message:"已取消"})}))},filter:function(e){for(var t in e)""===e[t]&&delete e[t];return e},getList:function(e){var t=this;this.listLoading=!0,this.tableFrom.page=e||this.tableFrom.page,Object(w["Ob"])(this.tableFrom).then((function(e){t.tableData.data=e.data.list,t.tableData.total=e.data.count,t.listLoading=!1})).catch((function(e){t.listLoading=!1,t.$message.error(e.message)}))},pageChange:function(e){this.tableFrom.page=e,this.getList("")},handleSizeChange:function(e){this.tableFrom.limit=e,this.getList("")}}},x=y,C=(n("75a4"),Object(h["a"])(x,g,_,!1,null,"1ed3d6bc",null)),D=C.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"500px","before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"formRef",attrs:{model:e.formData,rules:e.rules,"label-width":"100px",size:"small"}},[n("el-form-item",{attrs:{label:"用户分组",prop:"group_id"}},[n("el-select",{staticClass:"width100",attrs:{placeholder:"请选择用户分组",filterable:"",clearable:""},model:{value:e.formData.group_id,callback:function(t){e.$set(e.formData,"group_id",t)},expression:"formData.group_id"}},e._l(e.groupList,(function(e){return n("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"所在地区"}},[n("div",{staticClass:"acea-row"},[n("el-cascader",{ref:"cascader",staticClass:"width100",attrs:{options:e.regionOptions,props:e.cascaderProps,placeholder:"请选择省/市/区",clearable:""},on:{change:e.handleRegionChange},model:{value:e.formData.region,callback:function(t){e.$set(e.formData,"region",t)},expression:"formData.region"}})],1)])],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)},O=[],I=n("b85c"),$=n("2909"),S={name:"GroupAreaSelect",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"设置用户分组和地区"},userData:{type:Object,default:function(){return{}}}},data:function(){return{dialogVisible:!1,loading:!1,formData:{uid:"",group_id:"",region:[],province:"",city:"",district:"",province_id:"",city_id:"",district_id:"",address:""},rules:{group_id:[{required:!1,message:"请选择用户分组",trigger:"change"}]},groupList:[],regionOptions:[],regionMap:{},cascaderProps:{lazy:!0,value:"id",label:"name",checkStrictly:!0,emitPath:!0}}},watch:{visible:function(e){this.dialogVisible=e,e&&this.initData()},userData:{handler:function(e){e&&e.uid&&(this.formData.uid=e.uid,e.group_id?this.formData.group_id=e.group_id:e.group&&e.group.group_id&&(this.formData.group_id=e.group.group_id),e.province&&(this.formData.province=e.province),e.city&&(this.formData.city=e.city),e.district&&(this.formData.district=e.district),e.address&&(this.formData.address=e.address),e.province_id&&(this.formData.province_id=e.province_id),e.city_id&&(this.formData.city_id=e.city_id),e.district_id&&(this.formData.district_id=e.district_id),this.setRegionValue())},immediate:!0,deep:!0}},created:function(){this.getGroups()},mounted:function(){this.cascaderProps.lazyLoad=this.loadCities},methods:{initData:function(){var e=this;this.$nextTick((function(){e.$refs.formRef&&e.$refs.formRef.clearValidate(),e.setRegionValue()}))},setRegionValue:function(){var e=this.formData,t=e.province_id,n=e.city_id,r=e.district_id,a=[];t&&(a.push(t),n&&(a.push(n),r&&a.push(r))),a.length>0&&(this.formData.region=a,console.log("设置级联选择器的值:",a))},getGroups:function(){var e=this;Object(c["D"])().then((function(t){200===t.status?e.groupList=t.data.list||[]:e.$message.error(t.message||"获取用户分组失败")})).catch((function(t){e.$message.error("获取用户分组失败"),console.error(t)}))},getRegions:function(){var e=this;Object(c["v"])().then((function(t){200===t.status?(e.regionOptions=t.data||[],e.buildRegionMap(e.regionOptions),e.userData&&e.userData.province&&e.setRegionByAddress()):e.$message.error(t.message||"获取地区数据失败")})).catch((function(t){e.$message.error("获取地区数据失败"),console.error(t)}))},loadCities:function(e,t){if(0===e.level)Object(c["v"])().then((function(e){if(200===e.status){var n=e.data||[];t(n)}else t([])})).catch((function(){t([])}));else{var n=e.data.id;Object(c["v"])(n).then((function(e){if(200===e.status){var n=e.data||[];t(n)}else t([])})).catch((function(){t([])}))}},buildRegionMap:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e&&e.length&&e.forEach((function(e){var r=[].concat(Object($["a"])(n),[e.name]);t.regionMap[e.id]={name:e.name,path:r},e.children&&e.children.length&&t.buildRegionMap(e.children,r)}))},setRegionByAddress:function(){var e=this.formData,t=e.province,n=e.city,r=e.district;if(t){var a=this.findRegionIdByName(t);if(a){var i=[a];if(n){var o=this.findRegionIdByName(n,a);if(o&&(i.push(o),r)){var s=this.findRegionIdByName(r,o);s&&i.push(s)}}this.formData.region=i}}},handleRegionChange:function(e){if(console.log(e),!e||!e.length)return this.formData.province="",this.formData.city="",void(this.formData.district="");if(this.formData.province_id=e[0],this.formData.city_id=e[1],this.formData.district_id=e[2],e.length>0){var t=[];if(this.$refs.cascader&&"function"===typeof this.$refs.cascader.getCheckedNodes&&(t=this.$refs.cascader.getCheckedNodes()),t.length>0){var n=t.map((function(e){return e.data.name}));this.formData.province=n[0]||"",this.formData.city=n[1]||"",this.formData.district=n[2]||""}}},handleClose:function(){this.resetForm(),this.$emit("update:visible",!1),this.$emit("close")},resetForm:function(){var e=this;this.formData={uid:this.userData.uid||"",group_id:"",region:[],province:"",city:"",district:"",province_id:"",city_id:"",district_id:"",address:""},this.$nextTick((function(){e.$refs.formRef&&e.$refs.formRef.clearValidate()}))},handleSubmit:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){e.loading=!0;var n={uid:e.formData.uid,group_id:e.formData.group_id,province:e.formData.province,city:e.formData.city,district:e.formData.district,province_id:e.formData.province_id,city_id:e.formData.city_id,district_id:e.formData.district_id,address:e.formData.address};setTimeout((function(){e.loading=!1,e.$message.success("设置成功"),e.handleClose(),e.$emit("success",n)}),1e3)}}))},findRegionIdByName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return null;var n=function e(t,n){if(!t||!t.length)return null;var r,a=Object(I["a"])(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.name===n)return i.id;if(i.children&&i.children.length){var o=e(i.children,n);if(o)return o}}}catch(s){a.e(s)}finally{a.f()}return null};if(!t)return n(this.regionOptions,e);var r=function e(t,n){if(!t||!t.length)return null;var r,a=Object(I["a"])(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.id===n)return i;if(i.children&&i.children.length){var o=e(i.children,n);if(o)return o}}}catch(s){a.e(s)}finally{a.f()}return null},a=r(this.regionOptions,t);return a&&a.children?n(a.children,e):null}}},j=S,L=(n("f42a"),Object(h["a"])(j,F,O,!1,null,"b0605c60",null)),z=L.exports,M=n("2e83"),V={name:"UserList",components:{newsCategory:l["a"],userDetail:u["a"],userCreate:v,couponList:D,GroupAreaSelect:z},data:function(){var e;return e={moren:n("cdfe"),pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date,n=new Date;n.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),e.$emit("pick",[n,t])}},{text:"昨天",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))),e.$emit("pick",[n,t])}},{text:"最近7天",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近30天",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"本月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),e.$emit("pick",[n,t])}},{text:"本年",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.setTime(new Date((new Date).getFullYear(),0,1))),e.$emit("pick",[n,t])}}]},collapse:!0,select:"",keywords:"",timeVal:[],timeVal2:[],selectList:[],drawer:!1,maxCols:3,isShowSend:!0,visible:!1,user_type:"",tableData:{data:[],total:0},uid:"",listLoading:!0,multipleSelection:[],ids:"",wechatIds:""},Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(e,"uid",""),"labelPosition","right"),"userProps",{children:"children",label:"name",value:"name"}),"userFrom",{label_id:"",user_type:"",keyword:"",member_level:"",sex:"",is_promoter:"",country:"",pay_count:"",user_time_type:"",user_time:"",nickname:"",phone:"",province:"",city:"",is_svip:"",page:1,limit:20,group_id:"",fields_type:"",fields_value:""}),"address",[]),"grid",{xl:8,lg:12,md:12,sm:24,xs:24}),"grid2",{xl:18,lg:16,md:12,sm:24,xs:24}),"grid3",{xl:8,lg:12,md:12,sm:24,xs:24}),"addresData",[]),"groupList",[]),Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(e,"labelLists",[]),"memberList",[]),"chkName",""),"checkedIds",[]),"noChecked",[]),"checkedPage",[]),"visibleCoupon",!1),"visibleDistributor",!1),"couponForm",{"用户标签":"","用户类型":"","性别":"","身份":"","消费情况":"","访问情况":"","访问时间":"","昵称":""}),"allCheck",!1),Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(e,"cancel_time",null),"createDrawer",!1),"is_promoter",0),"groupAreaVisible",!1),"currentUser",{})},mounted:function(){this.groupLists(),this.getTagList(),this.getMemberList(),this.getSelectList(),this.getList("")},methods:{searchReset:function(){this.timeVal=[],this.timeVa2=[],this.userFrom.user_time="",this.userFrom.birthday="",this.select="",this.keywords="",this.$refs.searchForm.resetFields(),this.changeSearch(1)},changeSearch:function(e){switch(this.resetSearchVal(),this.select){case"uid":this.userFrom.uid=this.keywords,this.userSearchs(e);break;case"nickname":this.userFrom.nickname=this.keywords,this.userSearchs(e);break;case"phone":this.userFrom.phone=this.keywords,this.userSearchs(e);break;default:this.userFrom.keyword=this.keywords,this.userSearchs(e);break}},resetSearchVal:function(){this.userFrom.phone="",this.userFrom.nickname="",this.userFrom.uid="",this.userFrom.keyword=""},onHandle:function(e){this.chkName=this.chkName===e?"":e,this.changeType(!(""===this.chkName))},changeType:function(e){e?this.chkName||(this.chkName="dan"):(this.chkName="",this.allCheck=!1);var t=this.checkedPage.indexOf(this.userFrom.page);"dan"===this.chkName?this.checkedPage.push(this.userFrom.page):t>-1&&this.checkedPage.splice(t,1),this.syncCheckedId()},syncCheckedId:function(){var e=this,t=this.tableData.data.map((function(e){if(!e.cancel_time)return e.uid}));"duo"===this.chkName?(this.checkedIds=[],this.allCheck=!0):"dan"===this.chkName?(this.allCheck=!1,t.forEach((function(t){var n=e.checkedIds.indexOf(t);-1===n&&e.checkedIds.push(t)}))):t.forEach((function(t){var n=e.checkedIds.indexOf(t);n>-1&&e.checkedIds.splice(n,1)}))},changeOne:function(e,t){if(e)if("duo"===this.chkName){var n=this.noChecked.indexOf(t.uid);n>-1&&this.noChecked.splice(n,1)}else{var r=this.checkedIds.indexOf(t.uid);-1===r&&this.checkedIds.push(t.uid)}else if("duo"===this.chkName){var a=this.noChecked.indexOf(t.uid);-1===a&&this.noChecked.push(t.uid)}else{var i=this.checkedIds.indexOf(t.uid);i>-1&&this.checkedIds.splice(i,1)}},sendCoupon:function(){0==this.checkedIds.length&&0==this.allCheck?this.$message.warning("请选择用户"):this.visibleCoupon=!0},exportList:function(){var e=Object(o["a"])(Object(i["a"])().mark((function e(){var t,n,r,a,o;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=JSON.parse(JSON.stringify(this.userFrom)),n=[],t.page=1,r=1,a={},o=0;case 5:if(!(o<r)){e.next=14;break}return e.next=8,this.downData(t);case 8:a=e.sent,r=Math.ceil(a.count/t.limit),a.export.length&&(n=n.concat(a.export),t.page++);case 11:o++,e.next=5;break;case 14:return Object(M["a"])(a.header,a.title,n,a.foot,a.filename),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downData:function(e){return new Promise((function(t,n){Object(c["s"])(e).then((function(e){return t(e.data)}))}))},sendSuccess:function(){this.visibleCoupon=!1},getCoupounParmas:function(){var e=""==this.userFrom.label_id?"":this.getLabelValue(),t=this.findKey(this.userFrom.user_type,{"":"","微信用户":"wechat","小程序用户":"routine","H5用户":"h5"}),n=this.findKey(this.userFrom.sex,{"男":"1","女":"2","保密":"0","":""}),r=this.findKey(this.userFrom.sex,{"0次":"-1","1次以上":"0","2次以上":"1","3次以上":"2","4次以上":"3","5次以上":"4","":""}),a=this.findKey(this.userFrom.is_promoter,{"推广员":"1","普通用户":"0","":""}),i="visit"==this.userFrom.user_time_type?"最后访问":"add_time"==this.userFrom.user_time_type?"首次访问":"";this.couponForm={"用户标签":e,"用户类型":t,"性别":n,"消费情况":r,"身份":a,"访问情况":i,"访问时间":this.userFrom.user_time,"昵称":this.userFrom.nickname}},findKey:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};return Object.keys(t).find((function(r){return n(t[r],e)}))},getLabelValue:function(){for(var e="",t=0;t<this.labelLists.length;t++)if(this.labelLists[t]["label_id"]===this.userFrom.label_id)return e=this.labelLists[t]["label_name"],e},onchangeTime:function(e){this.timeVal=e,this.userFrom.user_time=e?this.timeVal.join("-"):"",this.changeSearch(1)},onchangeTime2:function(e){this.timeVal2=e,this.userFrom.birthday=e?this.timeVal2.join("-"):"",this.changeSearch(1)},userSearchs:function(e){this.userFrom.user_time_type&&!this.userFrom.user_time?this.$message.error("请选择访问时间"):!this.userFrom.user_time_type&&this.userFrom.user_time?this.$message.error("请选择访问情况"):this.getList(e)},createUser:function(){this.createDrawer=!0},groupLists:function(){var e=this;Object(c["D"])({page:1,limit:9999}).then(function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(n){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.groupList=n.data.list;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$message.error(t.message)}))},getSelectList:function(){var e=this;Object(c["ub"])().then(function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(n){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectList=n.data;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$message.error(t.message)}))},getTagList:function(){var e=this;Object(c["Q"])({page:1,limit:9999}).then((function(t){e.labelLists=t.data.list})).catch((function(t){e.$message.error(t.message)}))},getMemberList:function(){var e=this;Object(c["wb"])().then((function(t){e.memberList=t.data})).catch((function(t){e.$message.error(t.message)}))},onDetails:function(e){this.drawer=!0,this.uid=e,this.cancel_time=this.tableData.data.find((function(t){return t.uid===e})).cancel_time,this.$refs.userDetails.getData(e,!1,!0)},closeDrawer:function(){this.drawer=!1,this.createDrawer=!1},changeDrawer:function(e){this.drawer=e},sendNews:function(){if(0===this.checkedIds.length&&0==this.allCheck)return this.$message.warning("请先选择用户");this.visible=!0,this.wechatIds=this.getWechatUsers(this.tableData.data,this.checkedIds)},handleClose:function(){this.visible=!1},getWechatUsers:function(e,t){var n=[];if(this.allCheck)for(var r=0;r<e.length;r++)e[r]["wechat_user_id"]&&n.push(e[r]["wechat_user_id"]);else for(var a=0;a<e.length;a++)for(var i=0;i<t.length;i++)e[a]["uid"]===t[i]&&e[a]["wechat_user_id"]&&n.push(t[i]);return n},handleSelectionChange:function(e){this.multipleSelection=e;var t=[],n=[];this.multipleSelection.map((function(e){t.push(e.uid),n.push(e.wechat_user_id)})),this.ids=t.join(","),this.wechatIds=n.join(",")},setGroup:function(e){var t=this;this.$modalForm(Object(c["l"])(e.uid)).then((function(){return t.changeSearch()}))},submitGroupArea:function(e,t,n){var r=this;console.log(e+"data"),Object(c["sb"])({uid:e.uid,data:e}).then((function(a){200===a.status?e.province||e.city||e.district||e.address?Object(c["updateUserInfo"])({uid:e.uid,province:e.province,city:e.city,district:e.district,address:e.address}).then((function(e){200===e.status?(r.$message.success("设置成功"),r.getList(),t&&t()):(r.$message.error(e.message||"地址设置失败"),n&&n())})).catch((function(e){r.$message.error("地址设置失败"),console.error(e),n&&n()})):(r.$message.success("分组设置成功"),r.getList(),t&&t()):(r.$message.error(a.message||"分组设置失败"),n&&n())})).catch((function(e){r.$message.error("分组设置失败"),console.error(e),n&&n()}))},batchGroup:function(){if(0===this.checkedIds.length)return this.$message.warning("请先选择用户");this.$modalForm(Object(c["e"])({ids:this.checkedIds.join(",")}))},batchlabel:function(){if(0===this.checkedIds.length)return this.$message.warning("请先选择用户");this.$modalForm(Object(c["f"])({ids:this.checkedIds.join(",")}))},setLabel:function(e){var t=this;this.$modalForm(Object(c["q"])(e.uid)).then((function(){return t.changeSearch()}))},setDistributor:function(){if(0===this.checkedIds.length)return this.$message.warning("请先选择用户");this.$modalForm(Object(c["p"])({ids:this.checkedIds.join(",")}))},setMember:function(e){var t=this;this.$modalForm(Object(c["m"])(e.uid)).then((function(){return t.changeSearch()}))},giveMember:function(e){var t=this;this.$modalForm(Object(c["z"])(e.uid)).then((function(){return t.changeSearch()}))},setSuperior:function(e){var t=this;this.$modalForm(Object(c["ib"])(e.uid)).then((function(e){e.message;t.changeSearch()}))},setModify:function(e){var t=this;this.$modalForm(Object(c["hb"])(e.uid)).then((function(e){e.message;t.changeSearch()}))},setAgent:function(e){var t=this;this.$modalForm(Object(c["j"])(e.uid)).then((function(e){e.message;t.changeSearch()}))},setPassword:function(e){var t=this;this.$modalForm(Object(c["fb"])(e.uid)).then((function(){return t.changeSearch()}))},setMoney:function(e){var t=this;this.$modalForm(Object(c["o"])(e.uid)).then((function(){return t.changeSearch()}))},changeIntegral:function(e){var t=this;this.$modalForm(Object(c["n"])(e.uid)).then((function(){return t.changeSearch()}))},getList:function(e){var t=this;this.listLoading=!0,this.userFrom.page=e||this.userFrom.page,this.userFrom.user_type=this.user_type,this.userFrom.province=this.address[0],this.userFrom.city=this.address[1],"0"===this.userFrom.user_type&&(this.userFrom.user_type=""),Object(c["vb"])(this.userFrom).then((function(e){t.tableData.data=e.data.list,t.tableData.total=e.data.count,t.listLoading=!1,t.getCoupounParmas()})).catch((function(e){t.listLoading=!1,t.$message.error(e.message)}))},pageChange:function(e){this.userFrom.page=e,this.changeSearch()},handleSizeChange:function(e){this.userFrom.limit=e,this.changeSearch()},onEdit:function(e){this.drawer=!0,this.uid=e,this.$refs.userDetails.getData(e,!0,!1)},reset:function(){this.userFrom={label_id:"",user_type:"",sex:"",is_promoter:"",country:"",pay_count:"",user_time_type:"",user_time:"",nickname:"",province:"",city:"",page:1,limit:20,group_id:""},this.timeVal=[],this.changeSearch(1)},extendInfo:function(e){var t=this;this.$modalForm(Object(c["t"])(e.uid)).then((function(){return t.changeSearch()}))}}},T=V,N=(n("a576"),Object(h["a"])(T,r,a,!1,null,"8f709796",null));t["default"]=N.exports},e3db7:function(e,t,n){},f42a:function(e,t,n){"use strict";n("e3db7")}}]);