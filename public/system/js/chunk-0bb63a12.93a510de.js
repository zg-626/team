(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bb63a12"],{"0928":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"divBox"},[n("el-card",{staticClass:"box-card mb20"},[t.tabList.length>0?n("el-tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(t.tabList,(function(t,e){return n("el-tab-pane",{key:e,attrs:{name:t.value,label:t.title}})})),1):t._e(),t._v(" "),n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.fullscreenLoading,expression:"fullscreenLoading"}],ref:"formValidate",staticClass:"formValidate mt20",attrs:{rules:t.ruleValidate,model:t.formValidate,"label-width":"120px",size:"small"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentTab,expression:"currentTab == 1"}]},[n("el-form-item",{attrs:{label:"活动名称：",prop:"activity_name"}},[n("el-input",{staticClass:"selWidth",attrs:{size:"small",placeholder:"请输入边框名称"},model:{value:t.formValidate.activity_name,callback:function(e){t.$set(t.formValidate,"activity_name",e)},expression:"formValidate.activity_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"活动简介：",prop:"info"}},[n("el-input",{staticClass:"selWidth",attrs:{type:"textarea",maxlength:"500",size:"small",autosize:{minRows:4,maxRows:8},"show-word-limit":"",placeholder:"请输入活动简介"},model:{value:t.formValidate.info,callback:function(e){t.$set(t.formValidate,"info",e)},expression:"formValidate.info"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"封面图：",prop:"pic"}},[n("div",{staticClass:"acea-row row-middle"},[n("div",{staticClass:"upLoadPicBox mr15",on:{click:function(e){return t.modalPicTap("1")}}},[t.formValidate.pic?n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:t.formValidate.pic}})]):n("div",{staticClass:"upLoad"},[n("i",{staticClass:"iconfont iconjiahao"})])]),t._v(" "),n("div",{staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("\n              建议尺寸750*350px\n              "),n("el-popover",{attrs:{placement:"bottom","min-width":"200",trigger:"hover"}},[n("img",{staticStyle:{height:"270px"},attrs:{src:t.baseURL+"/statics/system/application01.jpg",alt:""}}),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("查看示例")])],1)],1)])]),t._v(" "),n("el-form-item",{attrs:{label:"活动分享海报：",prop:"images"}},[n("div",{staticClass:"acea-row row-middle"},[n("div",{staticClass:"acea-row"},[t._l(t.formValidate.images,(function(e,r){return n("div",{key:r,staticClass:"pictrue"},[n("img",{attrs:{src:e},on:{click:function(n){return t.lookImg(e)}}}),t._v(" "),n("i",{staticClass:"el-icon-error btndel",on:{click:function(e){return t.handleRemove(r)}}})])})),t._v(" "),t.formValidate.images.length<5?n("div",{staticClass:"upLoadPicBox mr15",on:{click:function(e){return t.modalPicTap("2")}}},[n("div",{staticClass:"upLoad"},[n("i",{staticClass:"iconfont iconjiahao"})])]):t._e()],2),t._v(" "),n("div",{staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("\n              建议尺寸750*1250px\n              "),n("el-popover",{attrs:{placement:"bottom",title:"","min-width":"200",trigger:"hover"}},[n("img",{staticStyle:{height:"270px"},attrs:{src:t.baseURL+"/statics/system/application02.jpg",alt:""}}),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("查看示例")])],1)],1)])]),t._v(" "),n("el-form-item",{attrs:{label:"活动背景色：",prop:"color"}},[n("div",{staticClass:"acea-row"},[n("el-color-picker",{staticClass:"mr15",model:{value:t.formValidate.color,callback:function(e){t.$set(t.formValidate,"color",e)},expression:"formValidate.color"}}),t._v(" "),n("div",{staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("\n              若未设置颜色，则为默认色\n                "),n("el-popover",{attrs:{placement:"bottom",title:"","min-width":"200",trigger:"hover"}},[n("img",{staticStyle:{height:"270px"},attrs:{src:t.baseURL+"/statics/system/application03.jpg",alt:""}}),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("查看示例")])],1)],1)],1)]),t._v(" "),n("el-form-item",{attrs:{label:"活动起止日期：",required:""}},[n("el-date-picker",{staticStyle:{width:"280px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",size:"small",type:"datetimerange",placement:"bottom-end",placeholder:"请选择活动时间"},on:{change:t.onchangeTime},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"活动人数上限：",prop:"count"}},[n("el-input-number",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入本次活动总人数","controls-position":"right"},model:{value:t.formValidate.count,callback:function(e){t.$set(t.formValidate,"count",e)},expression:"formValidate.count"}}),t._v(" "),n("span",[t._v("0为不限制人数")])],1),t._v(" "),n("el-form-item",{attrs:{label:"排序：",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入排序序号","controls-position":"right"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"是否开启：",prop:"is_show"}},[n("el-switch",{attrs:{width:60,"active-value":1,"inactive-value":0,"active-text":"开启","inactive-text":"关闭"},model:{value:t.formValidate.is_show,callback:function(e){t.$set(t.formValidate,"is_show",e)},expression:"formValidate.is_show"}})],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2==t.currentTab,expression:"currentTab == 2"}]},[n("el-form-item",{attrs:{label:"关联系统表单：",prop:"form_id"}},[n("el-select",{staticClass:"selWidth",attrs:{placeholder:"请选择",clearable:""},on:{change:t.getFormInfo},model:{value:t.formValidate.form_id,callback:function(e){t.$set(t.formValidate,"form_id",e)},expression:"formValidate.form_id"}},t._l(t.formList,(function(t){return n("el-option",{key:t.form_id,attrs:{label:t.name,value:t.form_id}})})),1)],1),t._v(" "),t.formValidate.form_id?n("el-form-item",[n("div",{staticStyle:{width:"350px"}},[n("iframe",{ref:"iframe",staticClass:"iframe-box",staticStyle:{"min-height":"350px"},attrs:{id:"iframe",src:t.formUrl,frameborder:"0"}})])]):t._e()],1)])],1),t._v(" "),n("el-card",{staticClass:"fixed-card"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.currentTab,expression:"currentTab == 1"}],attrs:{size:"small",type:"primary"},on:{click:function(e){t.currentTab="2"}}},[t._v("下一步")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.currentTab,expression:"currentTab == 2"}],attrs:{size:"small"},on:{click:function(e){t.currentTab="1"}}},[t._v("上一步")]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.currentTab,expression:"currentTab == 2"}],attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitForm("formValidate")}}},[t._v("保存")])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"},{name:"viewer",rawName:"v-viewer",value:{movable:!1},expression:"{ movable: false }"}],staticClass:"images"},t._l(t.formValidate.images,(function(t,e){return n("img",{key:e,attrs:{src:t}})})),0)],1)},o=[],a=n("ade3"),i=n("c7eb"),c=(n("96cf"),n("1da1")),u=(n("7f7f"),n("20d6"),n("b7be")),s=n("bbcc"),l=n("83d6"),f={name:"createApplication",data:function(){return{baseURL:s["a"].httpUrl||"http://localhost:8080",roterPre:l["roterPre"],currentTab:"1",tabList:[{value:"1",title:"基础设置"},{value:"2",title:"关联表单"}],fullscreenLoading:!1,timeVal:"",formValidate:{pic:"",images:[]},formData:[],formList:[],formUrl:"",ruleValidate:{activity_name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],pic:[{required:!0,message:"请上传封面图",trigger:"change"}],images:[{required:!0,message:"请上传海报图",trigger:"change"}],form_id:[{required:!0,message:"请选择关联系统表单",trigger:"change"}]}}},components:{},computed:{isEdit:function(){return!!this.$route.params.id}},mounted:function(){this.getFormSelect()},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({getFormSelect:function(){var t=this;Object(u["ac"])().then((function(e){t.formList=e.data})).catch((function(e){t.$message.error(e.message)}))},modalPicTap:function(t,e,n){var r=this;this.$modalUpload((function(e){"1"===t&&(r.formValidate.pic=e[0]),"2"===t&&e.map((function(t){r.formValidate.images.push(t),r.formValidate.images.length>5&&(r.formValidate.images.length=5)}))}),t)},handleRemove:function(t){this.formValidate.images.splice(t,1)},lookImg:function(t){var e=this,n=this.$el.querySelector(".images").$viewer;n.show(),this.$nextTick((function(){var r=e.formValidate.images.findIndex((function(e){return e===t}));n.update().view(r)}))},onchangeTime:function(t){this.timeVal=t,this.formValidate.start_time=t?t[0]:"",this.formValidate.end_time=t?t[1]:""},getFormInfo:function(){var t=1e3*(new Date).getTime(),e="".concat(this.baseURL,"/pages/admin/system_form/index?inner_frame=1&form_id=").concat(this.formValidate.form_id,"&time=").concat(t);this.formUrl=e,window.parent.document.getElementById("iframe").height=document.body.scrollHeight}},"lookImg",(function(t){var e=this,n=this.$el.querySelector(".images").$viewer;n.show(),this.$nextTick((function(){var r=e.formValidate.images.findIndex((function(e){return e===t}));n.update().view(r)}))})),"onchangeTime",(function(t){this.timeVal=t,this.formValidate.start_time=t?t[0]:"",this.formValidate.end_time=t?t[1]:""})),"getFormInfo",(function(){var t=1e3*(new Date).getTime(),e="".concat(this.baseURL,"/pages/admin/system_form/index?inner_frame=1&form_id=").concat(this.formValidate.form_id,"&time=").concat(t);this.formUrl=e})),"submitForm",(function(t){var e=this;this.$refs[t].validate((function(t){t&&(e.fullscreenLoading=!0,Object(u["a"])(e.formValidate).then(function(){var t=Object(c["a"])(Object(i["a"])().mark((function t(n){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fullscreenLoading=!1,e.$message.success(n.message),e.$router.push({path:e.roterPre+"/marketing/application/list"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.fullscreenLoading=!1,e.$message.error(t.message)})))}))}))},d=f,m=(n("68eb"),n("2877")),p=Object(m["a"])(d,r,o,!1,null,"4d31a959",null);e["default"]=p.exports},"68eb":function(t,e,n){"use strict";n("932a")},"932a":function(t,e,n){},b7be:function(t,e,n){"use strict";n.d(e,"Ob",(function(){return o})),n.d(e,"Nb",(function(){return a})),n.d(e,"Jb",(function(){return i})),n.d(e,"Ib",(function(){return c})),n.d(e,"Hb",(function(){return u})),n.d(e,"Kb",(function(){return s})),n.d(e,"Lb",(function(){return l})),n.d(e,"Mb",(function(){return f})),n.d(e,"W",(function(){return d})),n.d(e,"R",(function(){return m})),n.d(e,"S",(function(){return p})),n.d(e,"U",(function(){return g})),n.d(e,"T",(function(){return b})),n.d(e,"Bb",(function(){return v})),n.d(e,"Q",(function(){return h})),n.d(e,"x",(function(){return y})),n.d(e,"D",(function(){return _})),n.d(e,"v",(function(){return w})),n.d(e,"u",(function(){return x})),n.d(e,"w",(function(){return V})),n.d(e,"Cb",(function(){return k})),n.d(e,"Db",(function(){return T})),n.d(e,"Yb",(function(){return C})),n.d(e,"A",(function(){return L})),n.d(e,"z",(function(){return $})),n.d(e,"E",(function(){return j})),n.d(e,"i",(function(){return S})),n.d(e,"Xb",(function(){return U})),n.d(e,"Ub",(function(){return z})),n.d(e,"Wb",(function(){return O})),n.d(e,"Tb",(function(){return R})),n.d(e,"Vb",(function(){return I})),n.d(e,"Qb",(function(){return N})),n.d(e,"Zb",(function(){return P})),n.d(e,"y",(function(){return q})),n.d(e,"C",(function(){return F})),n.d(e,"B",(function(){return H})),n.d(e,"O",(function(){return B})),n.d(e,"G",(function(){return D})),n.d(e,"J",(function(){return M})),n.d(e,"K",(function(){return W})),n.d(e,"I",(function(){return E})),n.d(e,"L",(function(){return J})),n.d(e,"P",(function(){return A})),n.d(e,"N",(function(){return K})),n.d(e,"M",(function(){return Q})),n.d(e,"F",(function(){return X})),n.d(e,"H",(function(){return Y})),n.d(e,"V",(function(){return Z})),n.d(e,"nb",(function(){return G})),n.d(e,"mb",(function(){return tt})),n.d(e,"Sb",(function(){return et})),n.d(e,"fb",(function(){return nt})),n.d(e,"cc",(function(){return rt})),n.d(e,"cb",(function(){return ot})),n.d(e,"ab",(function(){return at})),n.d(e,"bb",(function(){return it})),n.d(e,"Rb",(function(){return ct})),n.d(e,"X",(function(){return ut})),n.d(e,"o",(function(){return st})),n.d(e,"n",(function(){return lt})),n.d(e,"m",(function(){return ft})),n.d(e,"l",(function(){return dt})),n.d(e,"k",(function(){return mt})),n.d(e,"Y",(function(){return pt})),n.d(e,"t",(function(){return gt})),n.d(e,"r",(function(){return bt})),n.d(e,"q",(function(){return vt})),n.d(e,"s",(function(){return ht})),n.d(e,"p",(function(){return yt})),n.d(e,"ib",(function(){return _t})),n.d(e,"gb",(function(){return wt})),n.d(e,"kb",(function(){return xt})),n.d(e,"hb",(function(){return Vt})),n.d(e,"jb",(function(){return kt})),n.d(e,"Z",(function(){return Tt})),n.d(e,"zb",(function(){return Ct})),n.d(e,"yb",(function(){return Lt})),n.d(e,"wb",(function(){return $t})),n.d(e,"Ab",(function(){return jt})),n.d(e,"eb",(function(){return St})),n.d(e,"vb",(function(){return Ut})),n.d(e,"xb",(function(){return zt})),n.d(e,"ub",(function(){return Ot})),n.d(e,"qb",(function(){return Rt})),n.d(e,"sb",(function(){return It})),n.d(e,"rb",(function(){return Nt})),n.d(e,"lb",(function(){return Pt})),n.d(e,"db",(function(){return qt})),n.d(e,"ob",(function(){return Ft})),n.d(e,"tb",(function(){return Ht})),n.d(e,"pb",(function(){return Bt})),n.d(e,"a",(function(){return Dt})),n.d(e,"ac",(function(){return Mt})),n.d(e,"d",(function(){return Wt})),n.d(e,"f",(function(){return Et})),n.d(e,"c",(function(){return Jt})),n.d(e,"j",(function(){return At})),n.d(e,"b",(function(){return Kt})),n.d(e,"h",(function(){return Qt})),n.d(e,"e",(function(){return Xt})),n.d(e,"g",(function(){return Yt}));var r=n("0c6d");function o(t){return r["a"].get("/store/coupon/platformLst",t)}function a(t){return r["a"].get("/store/coupon/update/".concat(t,"/form"))}function i(t){return r["a"].get("/store/coupon/show/".concat(t))}function c(t){return r["a"].delete("store/coupon/delete/".concat(t))}function u(t){return r["a"].get("/store/coupon/sys/clone/".concat(t,"/form"))}function s(t){return r["a"].get("store/coupon/sys/issue",t)}function l(t,e){return r["a"].get("store/coupon/show_lst/".concat(t),e)}function f(t){return r["a"].get("/store/coupon/send/lst",t)}function d(t){return r["a"].post("store/coupon/send",t)}function m(t){return r["a"].get("store/coupon/detail/".concat(t))}function p(t){return r["a"].get("store/coupon/lst",t)}function g(t,e){return r["a"].post("store/coupon/status/".concat(t),{status:e})}function b(){return r["a"].get("store/coupon/create/form")}function v(t){return r["a"].get("store/coupon/issue",t)}function h(t){return r["a"].delete("store/coupon/delete/".concat(t))}function y(t){return r["a"].get("broadcast/room/lst",t)}function _(t,e){return r["a"].post("broadcast/room/status/".concat(t),e)}function w(t){return r["a"].delete("broadcast/room/delete/".concat(t))}function x(t){return r["a"].get("broadcast/room/apply/form/".concat(t))}function V(t){return r["a"].get("broadcast/room/detail/".concat(t))}function k(t,e){return r["a"].post("broadcast/room/feedsPublic/".concat(t),{status:e})}function T(t,e){return r["a"].post("broadcast/room/comment/".concat(t),{status:e})}function C(t,e){return r["a"].post("broadcast/room/closeKf/".concat(t),{status:e})}function L(t){return r["a"].get("broadcast/goods/lst",t)}function $(t){return r["a"].get("broadcast/goods/detail/".concat(t))}function j(t,e){return r["a"].post("broadcast/goods/status/".concat(t),e)}function S(t){return r["a"].get("broadcast/goods/apply/form/".concat(t))}function U(){return r["a"].get("seckill/config/create/form")}function z(t){return r["a"].get("seckill/config/lst",t)}function O(t){return r["a"].get("seckill/config/update/".concat(t,"/form"))}function R(t){return r["a"].delete("seckill/config/delete/".concat(t))}function I(t,e){return r["a"].post("seckill/config/status/".concat(t),{status:e})}function N(t,e){return r["a"].get("seckill/product/detail/".concat(t),e)}function P(t,e){return r["a"].get("broadcast/room/goods/".concat(t),e)}function q(t){return r["a"].delete("broadcast/goods/delete/".concat(t))}function F(t,e){return r["a"].post("broadcast/room/sort/".concat(t),e)}function H(t,e){return r["a"].post("broadcast/goods/sort/".concat(t),e)}function B(t){return r["a"].post("config/others/group_buying",t)}function D(){return r["a"].get("config/others/group_buying")}function M(t){return r["a"].get("store/product/group/lst",t)}function W(t){return r["a"].get("store/product/group/get/".concat(t))}function E(t){return r["a"].get("store/product/group/detail/".concat(t))}function J(t){return r["a"].post("store/product/group/status",t)}function A(t,e){return r["a"].post("store/product/group/is_show/".concat(t),{status:e})}function K(t){return r["a"].get("store/product/group/get/".concat(t))}function Q(t,e){return r["a"].post("store/product/group/update/".concat(t),e)}function X(t){return r["a"].get("store/product/group/buying/lst",t)}function Y(t,e){return r["a"].get("store/product/group/buying/detail/".concat(t),e)}function Z(t,e){return r["a"].get("store/coupon/product/".concat(t),e)}function G(){return r["a"].get("user/integral/title")}function tt(t){return r["a"].get("user/integral/lst",t)}function et(t){return r["a"].get("user/integral/excel",t)}function nt(){return r["a"].get("user/integral/config")}function rt(t){return r["a"].post("user/integral/config",t)}function ot(t){return r["a"].get("discounts/lst",t)}function at(t,e){return r["a"].post("discounts/status/".concat(t),{status:e})}function it(t){return r["a"].get("discounts/detail/".concat(t))}function ct(t){return r["a"].get("marketing/spu/lst",t)}function ut(t){return r["a"].post("activity/atmosphere/create",t)}function st(t,e){return r["a"].post("activity/atmosphere/update/".concat(t),e)}function lt(t){return r["a"].get("activity/atmosphere/lst",t)}function ft(t){return r["a"].get("activity/atmosphere/detail/".concat(t))}function dt(t,e){return r["a"].post("activity/atmosphere/status/".concat(t),{status:e})}function mt(t){return r["a"].delete("activity/atmosphere/delete/".concat(t))}function pt(t){return r["a"].post("activity/border/create",t)}function gt(t,e){return r["a"].post("activity/border/update/".concat(t),e)}function bt(t){return r["a"].get("activity/border/lst",t)}function vt(t){return r["a"].get("activity/border/detail/".concat(t))}function ht(t,e){return r["a"].post("activity/border/status/".concat(t),{status:e})}function yt(t){return r["a"].delete("activity/border/delete/".concat(t))}function _t(){return r["a"].get("points/cate/lst")}function wt(){return r["a"].get("points/cate/create/form")}function xt(t){return r["a"].get("points/cate/update/form/".concat(t))}function Vt(t){return r["a"].delete("points/cate/delete/".concat(t))}function kt(t,e){return r["a"].post("points/cate/status/".concat(t),{status:e})}function Tt(t){return r["a"].post("points/product/create",t)}function Ct(t,e){return r["a"].post("points/product/update/".concat(t),e)}function Lt(t){return r["a"].get("points/product/lst",t)}function $t(t){return r["a"].delete("points/product/delete/".concat(t))}function jt(t,e){return r["a"].post("points/product/status/".concat(t),{status:e})}function St(t,e){return r["a"].post("points/product/get_attr_value/".concat(t),e)}function Ut(){return r["a"].get("points/cate/select")}function zt(t){return r["a"].get("points/product/detail/".concat(t))}function Ot(t){return r["a"].get("points/order/lst",t)}function Rt(t){return r["a"].get("points/order/detail/".concat(t))}function It(t){return r["a"].get("points/order/express/".concat(t))}function Nt(t){return r["a"].get("points/order/excel",t)}function Pt(t,e){return r["a"].post("points/order/delivery/".concat(t),e)}function qt(t){return r["a"].get("store/express/options",t)}function Ft(t){return r["a"].get("points/order/mark/".concat(t,"/form"))}function Ht(t,e){return r["a"].get("points/order/status/".concat(t),e)}function Bt(t){return r["a"].delete("points/order/delete/".concat(t))}function Dt(t){return r["a"].post("activity/form/create",t)}function Mt(){return r["a"].get("system/form/select")}function Wt(t){return r["a"].get("activity/form/lst",t)}function Et(t,e){return r["a"].post("activity/form/status/".concat(t),{status:e})}function Jt(t){return r["a"].get("activity/form/detail/".concat(t))}function At(t,e){return r["a"].get("system/form/info/".concat(t),e)}function Kt(t){return r["a"].delete("activity/form/delete/".concat(t))}function Qt(t,e){return r["a"].get("activity/form/user/lst/".concat(t),e)}function Xt(t,e){return r["a"].get("activity/form/excel/".concat(t),e)}function Yt(t,e){return r["a"].post("activity/form/update/".concat(t),e)}}}]);