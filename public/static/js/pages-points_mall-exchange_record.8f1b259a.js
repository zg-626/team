(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-points_mall-exchange_record"],{"08e3":function(t,e,a){"use strict";a.r(e);var n=a("113f"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"113f":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{title:{type:String,default:"暂无记录"}}};e.default=n},2273:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"empty-box"},[e("v-uni-image",{attrs:{src:"/static/images/empty-box.png"}}),e("v-uni-view",{staticClass:"txt"},[this._v(this._s(this.title))])],1)},i=[]},"2e7e":function(t,e,a){"use strict";a.r(e);var n=a("7eaf"),i=a("f16a");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("3929");var o=a("828b"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"3e8dab0b",null,!1,n["a"],void 0);e["default"]=c.exports},3929:function(t,e,a){"use strict";var n=a("90ff"),i=a.n(n);i.a},"4ecd":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.exchange-record .item[data-v-3e8dab0b]{background-color:#fff;margin:%?10?% %?30?%;border-radius:%?6?%}.exchange-record .item .exchange_record-time[data-v-3e8dab0b]{color:#333;border-bottom:1px solid #eee;padding:%?22?% %?30?%;display:flex;justify-content:space-between}.exchange-record .item .exchange_record-time .status[data-v-3e8dab0b]{color:var(--view-theme)}.exchange-record .item .picTxt[data-v-3e8dab0b]{border-bottom:1px solid #f0f0f0;padding:%?30?% %?30?%}.exchange-record .item .picTxt .pictrue[data-v-3e8dab0b]{width:%?120?%;height:%?120?%}.exchange-record .item .picTxt .pictrue uni-image[data-v-3e8dab0b]{width:100%;height:100%;border-radius:%?6?%}.exchange-record .item .picTxt .text[data-v-3e8dab0b]{width:%?470?%;font-size:%?30?%;color:#282828}.exchange-record .item .picTxt .text .time[data-v-3e8dab0b]{font-size:%?24?%;color:#868686;justify-content:left!important}.exchange-record .item .picTxt .text .successTxt[data-v-3e8dab0b]{font-size:%?24?%}.exchange-record .item .picTxt .text .endTxt[data-v-3e8dab0b]{font-size:%?24?%;color:#999}.exchange-record .item .picTxt .text .money[data-v-3e8dab0b]{font-size:%?24?%}.exchange-record .item .picTxt .text .money .num[data-v-3e8dab0b]{font-size:%?32?%;font-weight:700}.exchange-record .item .picTxt .text .money .symbol[data-v-3e8dab0b]{font-weight:700}.exchange-record .item .bottom[data-v-3e8dab0b]{height:%?100?%;padding:0 %?30?%;font-size:%?27?%}.exchange-record .item .bottom .purple[data-v-3e8dab0b]{color:#f78513}.exchange-record .item .bottom .end[data-v-3e8dab0b]{color:#999}.exchange-record .item .bottom .success[data-v-3e8dab0b]{color:#e93323}.exchange-record .item .bottom .bnt[data-v-3e8dab0b]{font-size:%?27?%;color:#fff;width:%?176?%;height:%?60?%;border-radius:%?32?%;text-align:center;line-height:%?60?%}.exchange-record .item .bottom .bnt.cancel[data-v-3e8dab0b]{color:#aaa;border:1px solid #ddd}.exchange-record .item .bottom .bnt ~ .bnt[data-v-3e8dab0b]{margin-left:%?18?%}.exchange-record .item .bottom .bg-colort[data-v-3e8dab0b]{background-color:var(--view-theme)}.gray-sty[data-v-3e8dab0b]{width:100%;font-size:%?24?%;color:#999}',""]),t.exports=e},"7eaf":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{style:t.viewColor},[t.exchangeList.length>0?a("v-uni-view",[a("v-uni-view",{staticClass:"exchange-record"},t._l(t.exchangeList,(function(e,n){return a("v-uni-view",{key:n},t._l(e.orderProduct,(function(i,r){return a("v-uni-view",{key:r,staticClass:"item"},[a("v-uni-view",{staticClass:"exchange_record-time"},[a("v-uni-view",[t._v(t._s(1==e.paid?"兑换时间："+e.pay_time:"订单编号："+e.order_sn))]),0==e.paid?a("v-uni-view",{staticClass:"status"},[t._v("待付款")]):a("v-uni-view",{staticClass:"status"},[t._v(t._s(0==e.status?"待发货":1==e.status?"待收货":"已完成"))])],1),i.cart_info?a("v-uni-view",{staticClass:"picTxt acea-row row-between-wrapper"},[a("v-uni-view",{staticClass:"pictrue"},[a("v-uni-image",{attrs:{src:i.cart_info.productAttr&&i.cart_info.productAttr.image||i.cart_info.product.image}})],1),a("v-uni-view",{staticClass:"text acea-row row-column-around"},[a("v-uni-view",{staticClass:"line1",staticStyle:{width:"100%"}},[t._v(t._s(i.cart_info.product.store_name))]),a("v-uni-view",{staticClass:"line1 gray-sty"},[t._v(t._s(i.cart_info.productAttr&&i.cart_info.productAttr.sku||"默认"))])],1)],1):t._e(),a("v-uni-view",{staticClass:"bottom acea-row row-between-wrapper"},[a("v-uni-view",{staticClass:"end"}),a("v-uni-view",{staticClass:"acea-row row-middle row-right"},[0==e.paid?a("v-uni-view",{staticClass:"bnt bg-colort",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goPay(e)}}},[t._v("立即付款")]):t._e(),2!=e.status&&1!=e.status||1!=e.delivery_type?t._e():a("v-uni-view",{staticClass:"bnt cancel",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getLogistics(e.order_id)}}},[t._v("查看物流")]),3==e.status&&1==e.paid?a("v-uni-view",{staticClass:"bnt cancel",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.delOrder(e.order_id,n,r)}}},[t._v("删除")]):t._e(),1==e.paid?a("v-uni-view",{staticClass:"bnt bg-colort",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goDetail(e.order_id)}}},[t._v("查看详情")]):t._e()],1)],1)],1)})),1)})),1)],1):t._e(),t.isLogin?a("v-uni-view",{staticClass:"acea-row row-center-wrapper loadingicon",attrs:{hidden:!t.loading}},[a("v-uni-text",{staticClass:"iconfont icon-jiazai loading",attrs:{hidden:!t.loading}}),t._v(t._s(t.loadTitle))],1):t._e(),0!=t.exchangeList.length||t.loading?t._e():[a("emptyPage",{attrs:{title:"暂无兑换记录～"}})],a("payment",{attrs:{payMode:t.payMode,order_type:2,pay_close:t.pay_close,returnUrl:"/pages/points_mall/integral_order_details?order_id="+t.order_id,order_id:t.pay_order_id,totalPrice:t.totalPrice},on:{onChangeFun:function(e){arguments[0]=e=t.$handleEvent(e),t.onChangeFun.apply(void 0,arguments)}}})],2)},i=[]},"90ff":function(t,e,a){var n=a("4ecd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("e2225a52",n,!0,{sourceMap:!1,shadowMode:!1})},"98a9":function(t,e,a){"use strict";a.r(e);var n=a("2273"),i=a("08e3");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("c26f");var o=a("828b"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"0dbffc1a",null,!1,n["a"],void 0);e["default"]=c.exports},a6dd:function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.empty-box[data-v-0dbffc1a]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:%?200?%}.empty-box uni-image[data-v-0dbffc1a]{width:%?414?%;height:%?240?%}.empty-box .txt[data-v-0dbffc1a]{font-size:%?26?%;color:#999}',""]),t.exports=e},acff:function(t,e,a){var n=a("a6dd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("7e1e7da4",n,!0,{sourceMap:!1,shadowMode:!1})},c26f:function(t,e,a){"use strict";var n=a("acff"),i=a.n(n);i.a},dd8e:function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("aa9c"),a("c9b5"),a("bf0f"),a("ab80"),a("dd2b");var i=n(a("9b1b")),r=n(a("98a9")),o=a("8f59"),c=a("ea96"),d=a("6647"),s=n(a("9e7c")),u=a("a9c8"),l=a("53ad"),f={name:"exchangeRecord",components:{emptyPage:r.default,payment:s.default},props:{},data:function(){return{exchangeList:[],payMode:[{name:"微信支付",icon:"icon-weixinzhifu",value:"wechat",title:"微信快捷支付",payStatus:1},{name:"支付宝支付",icon:"icon-zhifubao",value:"alipay",title:"支付宝支付",payStatus:this.$store.getters.globalData.alipay_open},{name:"余额支付",icon:"icon-yuezhifu",value:"balance",title:"可用余额:",number:0,payStatus:this.$store.getters.globalData.yue_pay_status}],loadend:!1,loading:!1,loadTitle:"加载更多",page:1,limit:20,userInfo:{},pay_close:!1,pay_order_id:"",order_id:"",totalPrice:"0",delta:1}},computed:(0,i.default)((0,i.default)({},(0,o.mapGetters)(["isLogin","viewColor"])),(0,u.configMap)(["alipay_open","yue_pay_status"])),watch:{alipay_open:function(t){this.payMode[1].payStatus=t},yue_pay_status:function(t){this.payMode[2].payStatus=t}},onLoad:function(t){this.delta=t.delta||0},onUnload:function(){},onShow:function(){!1===this.isLogin?(0,l.toLogin)():(this.getIntegralOrderList(),this.getUserInfo())},methods:{goDetail:function(t){uni.navigateTo({url:"/pages/points_mall/integral_order_details?order_id=".concat(t)})},getUserInfo:function(){var t=this;(0,d.getUserInfo)().then((function(e){t.payMode[2].number=e.data.now_money}))},getIntegralOrderList:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle="",(0,c.integralOrderList)({page:t.page,limit:t.limit}).then((function(e){var a=e.data.list.length<t.limit;t.loadend=a,t.loading=!1,t.loadTitle=a?"已全部加载":"加载更多",t.exchangeList.push.apply(t.exchangeList,e.data.list),t.page++})).catch((function(e){t.$util.Tips({title:e})})))},goPay:function(t){this.$set(this,"pay_close",!0),this.order_id=t.order_id,this.pay_order_id=t.group_order_id.toString(),this.$set(this,"totalPrice",t.pay_price)},pay_complete:function(){this.loadend=!1,this.page=1,this.$set(this,"exchangeList",[]),this.pay_close=!1,this.pay_order_id="",this.getIntegralOrderList()},pay_fail:function(){this.pay_close=!1,this.pay_order_id=""},payClose:function(){this.$set(this,"pay_close",!1),this.pay_order_id=""},onChangeFun:function(t){var e=t,a=e.action||null,n=void 0!=e.value?e.value:null;a&&this[a]&&this[a](n)},goOrderDetails:function(t){if(!t)return that.$util.Tips({title:"缺少订单号无法查看订单详情"});uni.navigateTo({url:"/pages/points_mall/integral_order_details?order_id="+t})},getLogistics:function(t){uni.navigateTo({url:"/pages/users/goods_logistics/index?orderId=".concat(t)})},delOrder:function(t,e,a){var n=this;uni.showModal({title:"提示",content:"确定删除该记录吗？",success:function(i){i.confirm?(0,c.integralOrderDelete)(t).then((function(t){n.exchangeList[e]["orderProduct"].splice(a,1),n.$util.Tips({title:"删除成功"})})).catch((function(t){return n.$util.Tips({title:t})})):i.cancel}})}},onReachBottom:function(){this.getIntegralOrderList()}};e.default=f},ea96:function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.getIntegralGoodsList=function(t){return i.default.get("points/lst",t,{noAuth:!0})},e.getIntegralHome=function(){return i.default.get("points/home",{},{noAuth:!0})},e.getIntegralProductDetail=function(t){return i.default.get("points/detail/".concat(t),{},{noAuth:!0})},e.getIntegralScope=function(){return i.default.get("points/scope",{},{noAuth:!0})},e.integralOrderConfirm=function(t){return i.default.post("order/v3/check",t,{noAuth:!0})},e.integralOrderCreate=function(t){return i.default.post("order/v3/create",t,{noAuth:!0})},e.integralOrderDelete=function(t){return i.default.post("points/order/deleate/".concat(t),{},{noAuth:!0})},e.integralOrderDetail=function(t){return i.default.get("points/order/detail/".concat(t),{},{noAuth:!0})},e.integralOrderList=function(t){return i.default.get("points/order/lst",t,{noAuth:!0})},e.integralOrderTake=function(t){return i.default.post("points/order/take/".concat(t),{},{noAuth:!0})};var i=n(a("64b7"))},f16a:function(t,e,a){"use strict";a.r(e);var n=a("dd8e"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a}}]);